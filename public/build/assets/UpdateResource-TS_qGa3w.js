import{W as N,r as i,d as w,j as e}from"./app-Bfv3GMc6.js";import{I as C}from"./InputLabel-DQ-I2VZW.js";import{T as c}from"./TextInput-_JHfbmkg.js";import{I as g}from"./InputError-AfcPBs2v.js";import{S as d}from"./SecondaryButton-QNtoH7kM.js";import{P as F}from"./PrimaryButton-_KXdAZ-4.js";import{_ as I}from"./index-CIxO5Z_8.js";import{I as p}from"./IconX-I2GpZUfa.js";import{I as S}from"./IconPlus-BttZ3EAl.js";import"./createReactComponent-BEmKhJzi.js";function z({resource:h,closeModal:x,restApis:D}){const{data:o,setData:l,post:R,processing:m,errors:u,reset:P}=N(h),[n,y]=i.useState([]);i.useState(Array(o.fields.length).fill(!1)),i.useState([]),i.useEffect(()=>{w.get(route("resources.fields")).then(s=>{y(s.data.data)}).catch(s=>{I.error("There was an error!")})},[]);const j=s=>{s.preventDefault()},f=s=>{if(typeof s=="string"){const r=s.split(" ");return r.splice(1,1),r.join(" ")}else return""},b=()=>{o.fields.length>=10||l("fields",[...o.fields,{name:"",category:"FakerPHP",type:"person.firstName"}])},v=s=>{const r=o.fields;r.splice(s,1),l("fields",r)},k=s=>s.charAt(0).toUpperCase()+s.slice(1);return e.jsxs("form",{onSubmit:j,className:"p-6 overflow-y-scroll",style:{maxHeight:"100vh",overflowY:"auto"},children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Create Resource"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(C,{htmlFor:"name-resource",value:"Resource Name"}),e.jsx(c,{id:"name-resource",type:"text",name:"name",required:!0,value:o.name,onChange:s=>l("name",s.target.value),className:"mt-1 block lg:w-2/4 md:w-2/4 sm:w-full",autoComplete:"off",placeholder:"Example: users, posts, comments"}),e.jsx(g,{message:u.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mt-6",children:"Scheme"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Define Resource schema, it will be used to generate mock data."}),e.jsx("div",{children:e.jsxs("div",{className:"flex align-items-center mt-2",children:[e.jsx(c,{id:"field-name-id",disabled:!0,value:"id",autoComplete:"off",placeholder:"Field name",className:"w-3/12"}),e.jsx("select",{id:"category-type-id",className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:"Object ID",disabled:!0,children:e.jsx("option",{value:"number",children:"Unique ID"})})]})}),o.fields.map((s,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex align-items-center mt-2",children:[e.jsx(c,{id:`field-name-${r}`,type:"text",required:!0,name:`fields[${r}][name]`,value:s.name,onChange:t=>{let a=[...o.fields];a[r].name=t.target.value,l("fields",a)},autoComplete:"off",placeholder:"Field name",className:"w-3/12"}),e.jsxs("select",{id:`category-type-${r}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.category,onChange:t=>{let a=[...o.fields];a[r].category=t.target.value,l("fields",a)},children:[r==0&&e.jsx("option",{value:"number",children:"Unique ID"}),Object.entries(n).map(([t,a])=>e.jsx("option",{value:t,children:k(t)},t))]}),n[s.category]&&e.jsx("select",{id:`field-type-${r}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.type,onChange:t=>{let a=[...o.fields];a[r].type=t.target.value,l("fields",a)},children:Object.entries(n[s.category]||{}).map(([t,a])=>e.jsx("option",{value:a,children:a},t))}),r!=0&&e.jsx(d,{type:"button",onClick:()=>v(r),className:"ml-6",children:e.jsx(p,{})}),r==0&&e.jsx(d,{style:{opacity:"0"},type:"button",onClick:()=>{},className:"ml-6",children:e.jsx(p,{})})]},r),e.jsx(g,{message:f(f(u[`fields.${r}.type`])),className:"mt-2"})]},r)),e.jsx(d,{className:"mt-6",type:"button",onClick:b,disabled:m||10<=o.fields.length,children:e.jsx(S,{size:25})})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(d,{onClick:x,children:"Cancel"}),e.jsx(F,{className:"ms-3",disabled:m,children:"Update"})]})]})}export{z as UpdateResource};

import{W as v,r as a,c as w,j as e}from"./app-DynpH6MQ.js";import{I as C}from"./InputLabel-B-QWrK9Q.js";import{T as u}from"./TextInput-Bm_CHTyn.js";import{I as g}from"./InputError-CnxIwAw3.js";import{S as o}from"./SecondaryButton-DOud6UEw.js";import{P as I}from"./PrimaryButton-CpvVGy6R.js";import{I as f}from"./IconX-DNAsVSye.js";import{I as F}from"./IconPlus-DoIyq6jg.js";import"./createReactComponent-D5lQ_2zB.js";function z({resource:x,closeModal:p,restApis:y}){const{data:t,setData:i,post:E,processing:n,errors:c,reset:S}=v(x),[l,h]=a.useState([]);a.useState(Array(t.fields.length).fill(!1)),a.useState([]),a.useEffect(()=>{w.get(route("resources.fields")).then(r=>{h(r.data.data)}).catch(r=>{console.error("There was an error!",r)})},[]);const b=r=>{r.preventDefault()},m=r=>{if(typeof r=="string"){const s=r.split(" ");return s.splice(1,1),s.join(" ")}else return""},j=()=>{t.fields.length>=10},k=r=>{const s=t.fields;s.splice(r,1),i("fields",s)},N=r=>r.charAt(0).toUpperCase()+r.slice(1);return e.jsxs("form",{onSubmit:b,className:"p-6 overflow-y-scroll",style:{maxHeight:"100vh",overflowY:"auto"},children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Update Resource"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(C,{htmlFor:"name-resource",value:"Resource Name"}),e.jsx(u,{id:"name-resource",type:"text",name:"name",required:!0,value:t.name,onChange:r=>i("name",r.target.value),className:"mt-1 block lg:w-2/4 md:w-2/4 sm:w-full",autoComplete:"off",placeholder:"Example: users, posts, comments"}),e.jsx(g,{message:c.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mt-6",children:"Scheme"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Define Resource schema, it will be used to generate mock data."}),t.fields.map((r,s)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex align-items-center mt-2",children:[e.jsx(u,{id:`field-name-${s}`,type:"text",required:!0,name:`fields[${s}][name]`,disabled:s==0,value:r.name,autoComplete:"off",placeholder:"Field name",className:"w-3/12"}),e.jsxs("select",{id:`category-type-${s}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:["number","string","boolean","date","array","object"].includes(r.category)?r.category:"fakerPHP",disabled:s==0,children:[s==0&&e.jsx("option",{value:"number",children:"Unique ID"}),Object.entries(l).map(([d,R])=>e.jsx("option",{value:d,children:N(d)},d))]}),l[["number","string","boolean","date","array","object"].includes(r.category)?r.category:"fakerPHP"]&&l[["number","string","boolean","date","array","object"].includes(r.category)?r.category:"fakerPHP"].length>0&&e.jsx("select",{id:`field-type-${s}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:r.type}),s!=0&&e.jsx(o,{type:"button",onClick:()=>k(s),className:"ml-6",children:e.jsx(f,{})}),s==0&&e.jsx(o,{style:{opacity:"0"},type:"button",onClick:()=>{},className:"ml-6",children:e.jsx(f,{})})]},s),e.jsx(g,{message:m(m(c[`fields.${s}.type`])),className:"mt-2"})]},s)),e.jsx(o,{className:"mt-6",type:"button",onClick:j,disabled:n||10<=t.fields.length,children:e.jsx(F,{size:25})})]}),e.jsx("h2",{className:"text-lg mt-6 font-medium text-gray-900 dark:text-gray-100",children:"Endpoints"}),e.jsx("div",{className:"mt-4",children:y[0].map((r,s)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"mt-2 text-sm text-gray-600 font-bold dark:text-gray-400",children:r.method}),e.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-md font-semibold text-md text-gray-700 dark:text-gray-300 tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-25 transition ease-in-out duration-150",children:r.route})]},s))}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(o,{onClick:p,children:"Cancel"}),e.jsx(I,{className:"ms-3",disabled:n,children:"Update"})]})]})}export{z as UpdateResource};

import{j as L,r as x,g as Ns,e as M,b as mc,W as gc,Y as yc,d as xc,y as wc}from"./app-5jPogs4x.js";import{A as vc}from"./AuthenticatedLayout-BkjxAaW5.js";import{M as dt}from"./Modal-Bo4Q3mTs.js";import{UpdateResource as bc}from"./UpdateResource-BTZc6Hzn.js";import _c from"./DeleteResource-BEDyewRx.js";import{c as io}from"./createReactComponent-BbZrUBLn.js";import{I as As,a as Ec,b as Sc}from"./IconTrash-DR1kh0Tr.js";import{CreateResource as Nc}from"./CreateResource-Bzfin5cR.js";import{S as In}from"./SecondaryButton-DFTKBi3h.js";import{CreateResourcesByAI as Ac}from"./CreateResourcesByAI-B-FABgU8.js";import{D as Lt}from"./Dropdown-CHykUhea.js";import{_ as yt}from"./index-CMVvBdJP.js";import Cc from"./DeleteProject-Em4tqjhZ.js";import kc from"./UpdateProject-U6tRveiw.js";import{Export as Mc}from"./Export-DOcN0Obj.js";import Tc from"./ConnectReosurceTo-CQenkR7K.js";import Rc from"./ResourceData-DZna0EV4.js";import{I as $c}from"./IconPlus-DUD2nx2q.js";import"./ApplicationLogo-2-2k4CcA.js";import"./ResponsiveNavLink-ydVswaT6.js";import"./transition-DdgJfmWj.js";import"./InputLabel-C1KnzeBG.js";import"./TextInput-D94DsnWb.js";import"./InputError-tdr2ADJM.js";import"./PrimaryButton-obzpOGb-.js";import"./IconX-BqBLFPmt.js";import"./DangerButton-Beyhrmv8.js";/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ic=io("outline","brand-openai","IconBrandOpenai",[["path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35",key:"svg-0"}],["path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946",key:"svg-1"}],["path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348",key:"svg-2"}],["path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45",key:"svg-3"}],["path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946",key:"svg-4"}],["path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dc=io("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zc=io("outline","file-export","IconFileExport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pc=io("outline","plug-connected","IconPlugConnected",[["path",{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z",key:"svg-0"}],["path",{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z",key:"svg-1"}],["path",{d:"M3 21l2.5 -2.5",key:"svg-2"}],["path",{d:"M18.5 5.5l2.5 -2.5",key:"svg-3"}],["path",{d:"M10 11l-2 2",key:"svg-4"}],["path",{d:"M13 14l-2 2",key:"svg-5"}]]);function Oc({projectUUID:e,endpoint:t}){return L.jsxs("div",{className:"max-w-screen-md",children:[L.jsx("h2",{className:"font-semibold mb-2 text-lg dark:text-gray-800",children:"API Endpoint"}),L.jsxs("h5",{className:"font-semibold text-lg dark:text-gray-200 leading-tight",children:[t.protocol,"://",L.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 text-gray-600 p-1 ring-1 ring-inset ring-gray-500/20",children:t.project_uuid}),".",L.jsx("span",{children:t.domain}),"/",L.jsx("span",{className:"inline-flex items-center rounded-md bg-pink-50 text-gray-600 p-1 ring-1 ring-inset ring-pink-700/10",children:":resource"})]})]})}function Re(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=Re(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Cs={exports:{}},ks={},Ms={exports:{}},Ts={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ut=x;function Lc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hc=typeof Object.is=="function"?Object.is:Lc,Bc=Ut.useState,Vc=Ut.useEffect,Fc=Ut.useLayoutEffect,jc=Ut.useDebugValue;function Wc(e,t){var n=t(),o=Bc({inst:{value:n,getSnapshot:t}}),r=o[0].inst,s=o[1];return Fc(function(){r.value=n,r.getSnapshot=t,bo(r)&&s({inst:r})},[e,n,t]),Vc(function(){return bo(r)&&s({inst:r}),e(function(){bo(r)&&s({inst:r})})},[e]),jc(n),n}function bo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hc(e,n)}catch{return!0}}function Xc(e,t){return t()}var Yc=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xc:Wc;Ts.useSyncExternalStore=Ut.useSyncExternalStore!==void 0?Ut.useSyncExternalStore:Yc;Ms.exports=Ts;var qc=Ms.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var co=x,Zc=qc;function Gc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Uc=typeof Object.is=="function"?Object.is:Gc,Kc=Zc.useSyncExternalStore,Qc=co.useRef,Jc=co.useEffect,el=co.useMemo,tl=co.useDebugValue;ks.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var s=Qc(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=el(function(){function l(d){if(!a){if(a=!0,u=d,d=o(d),r!==void 0&&i.hasValue){var y=i.value;if(r(y,d))return f=y}return f=d}if(y=f,Uc(u,d))return y;var g=o(d);return r!==void 0&&r(y,g)?y:(u=d,f=g)}var a=!1,u,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,o,r]);var c=Kc(e,s[0],s[1]);return Jc(function(){i.hasValue=!0,i.value=c},[c]),tl(c),c};Cs.exports=ks;var nl=Cs.exports;const ol=Ns(nl);var rl={VITE_APP_NAME:"Mockapi",BASE_URL:"/build/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Er=e=>{let t;const n=new Set,o=(u,f)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const d=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,d))}},r=()=>t,l={setState:o,getState:r,getInitialState:()=>a,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(rl?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,l);return l},sl=e=>e?Er(e):Er,{useDebugValue:il}=M,{useSyncExternalStoreWithSelector:cl}=ol,ll=e=>e;function Rs(e,t=ll,n){const o=cl(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return il(o),o}const Sr=(e,t)=>{const n=sl(e),o=(r,s=t)=>Rs(n,r,s);return Object.assign(o,n),o},al=(e,t)=>e?Sr(e,t):Sr;function Ce(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var ul={value:()=>{}};function lo(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wn(n)}function Wn(e){this._=e}function fl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Wn.prototype=lo.prototype={constructor:Wn,on:function(e,t){var n=this._,o=fl(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=dl(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=Nr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Nr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function dl(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Nr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=ul,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Io="http://www.w3.org/1999/xhtml";const Ar={svg:"http://www.w3.org/2000/svg",xhtml:Io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ao(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ar.hasOwnProperty(t)?{space:Ar[t],local:e}:e}function hl(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Io&&t.documentElement.namespaceURI===Io?t.createElement(e):t.createElementNS(n,e)}}function pl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $s(e){var t=ao(e);return(t.local?pl:hl)(t)}function ml(){}function Jo(e){return e==null?ml:function(){return this.querySelector(e)}}function gl(e){typeof e!="function"&&(e=Jo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,c=o[r]=new Array(i),l,a,u=0;u<i;++u)(l=s[u])&&(a=e.call(l,l.__data__,u,s))&&("__data__"in l&&(a.__data__=l.__data__),c[u]=a);return new Be(o,this._parents)}function yl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xl(){return[]}function Is(e){return e==null?xl:function(){return this.querySelectorAll(e)}}function wl(e){return function(){return yl(e.apply(this,arguments))}}function vl(e){typeof e=="function"?e=wl(e):e=Is(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],c=i.length,l,a=0;a<c;++a)(l=i[a])&&(o.push(e.call(l,l.__data__,a,i)),r.push(l));return new Be(o,r)}function Ds(e){return function(){return this.matches(e)}}function zs(e){return function(t){return t.matches(e)}}var bl=Array.prototype.find;function _l(e){return function(){return bl.call(this.children,e)}}function El(){return this.firstElementChild}function Sl(e){return this.select(e==null?El:_l(typeof e=="function"?e:zs(e)))}var Nl=Array.prototype.filter;function Al(){return Array.from(this.children)}function Cl(e){return function(){return Nl.call(this.children,e)}}function kl(e){return this.selectAll(e==null?Al:Cl(typeof e=="function"?e:zs(e)))}function Ml(e){typeof e!="function"&&(e=Ds(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,c=o[r]=[],l,a=0;a<i;++a)(l=s[a])&&e.call(l,l.__data__,a,s)&&c.push(l);return new Be(o,this._parents)}function Ps(e){return new Array(e.length)}function Tl(){return new Be(this._enter||this._groups.map(Ps),this._parents)}function Zn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zn.prototype={constructor:Zn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Rl(e){return function(){return e}}function $l(e,t,n,o,r,s){for(var i=0,c,l=t.length,a=s.length;i<a;++i)(c=t[i])?(c.__data__=s[i],o[i]=c):n[i]=new Zn(e,s[i]);for(;i<l;++i)(c=t[i])&&(r[i]=c)}function Il(e,t,n,o,r,s,i){var c,l,a=new Map,u=t.length,f=s.length,h=new Array(u),d;for(c=0;c<u;++c)(l=t[c])&&(h[c]=d=i.call(l,l.__data__,c,t)+"",a.has(d)?r[c]=l:a.set(d,l));for(c=0;c<f;++c)d=i.call(e,s[c],c,s)+"",(l=a.get(d))?(o[c]=l,l.__data__=s[c],a.delete(d)):n[c]=new Zn(e,s[c]);for(c=0;c<u;++c)(l=t[c])&&a.get(h[c])===l&&(r[c]=l)}function Dl(e){return e.__data__}function zl(e,t){if(!arguments.length)return Array.from(this,Dl);var n=t?Il:$l,o=this._parents,r=this._groups;typeof e!="function"&&(e=Rl(e));for(var s=r.length,i=new Array(s),c=new Array(s),l=new Array(s),a=0;a<s;++a){var u=o[a],f=r[a],h=f.length,d=Pl(e.call(u,u&&u.__data__,a,o)),y=d.length,g=c[a]=new Array(y),w=i[a]=new Array(y),m=l[a]=new Array(h);n(u,f,g,w,m,d,t);for(var b=0,S=0,v,A;b<y;++b)if(v=g[b]){for(b>=S&&(S=b+1);!(A=w[S])&&++S<y;);v._next=A||null}}return i=new Be(i,o),i._enter=c,i._exit=l,i}function Pl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ol(){return new Be(this._exit||this._groups.map(Ps),this._parents)}function Ll(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function Hl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),c=new Array(r),l=0;l<i;++l)for(var a=n[l],u=o[l],f=a.length,h=c[l]=new Array(f),d,y=0;y<f;++y)(d=a[y]||u[y])&&(h[y]=d);for(;l<r;++l)c[l]=n[l];return new Be(c,this._parents)}function Bl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Vl(e){e||(e=Fl);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],c=i.length,l=r[s]=new Array(c),a,u=0;u<c;++u)(a=i[u])&&(l[u]=a);l.sort(t)}return new Be(r,this._parents).order()}function Fl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wl(){return Array.from(this)}function Xl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function Yl(){let e=0;for(const t of this)++e;return e}function ql(){return!this.node()}function Zl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,c;s<i;++s)(c=r[s])&&e.call(c,c.__data__,s,r);return this}function Gl(e){return function(){this.removeAttribute(e)}}function Ul(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kl(e,t){return function(){this.setAttribute(e,t)}}function Ql(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Jl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ea(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ta(e,t){var n=ao(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ul:Gl:typeof t=="function"?n.local?ea:Jl:n.local?Ql:Kl)(n,t))}function Os(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function na(e){return function(){this.style.removeProperty(e)}}function oa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ra(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function sa(e,t,n){return arguments.length>1?this.each((t==null?na:typeof t=="function"?ra:oa)(e,t,n??"")):Kt(this.node(),e)}function Kt(e,t){return e.style.getPropertyValue(t)||Os(e).getComputedStyle(e,null).getPropertyValue(t)}function ia(e){return function(){delete this[e]}}function ca(e,t){return function(){this[e]=t}}function la(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aa(e,t){return arguments.length>1?this.each((t==null?ia:typeof t=="function"?la:ca)(e,t)):this.node()[e]}function Ls(e){return e.trim().split(/^|\s+/)}function er(e){return e.classList||new Hs(e)}function Hs(e){this._node=e,this._names=Ls(e.getAttribute("class")||"")}Hs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bs(e,t){for(var n=er(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Vs(e,t){for(var n=er(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ua(e){return function(){Bs(this,e)}}function fa(e){return function(){Vs(this,e)}}function da(e,t){return function(){(t.apply(this,arguments)?Bs:Vs)(this,e)}}function ha(e,t){var n=Ls(e+"");if(arguments.length<2){for(var o=er(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?da:t?ua:fa)(n,t))}function pa(){this.textContent=""}function ma(e){return function(){this.textContent=e}}function ga(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ya(e){return arguments.length?this.each(e==null?pa:(typeof e=="function"?ga:ma)(e)):this.node().textContent}function xa(){this.innerHTML=""}function wa(e){return function(){this.innerHTML=e}}function va(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ba(e){return arguments.length?this.each(e==null?xa:(typeof e=="function"?va:wa)(e)):this.node().innerHTML}function _a(){this.nextSibling&&this.parentNode.appendChild(this)}function Ea(){return this.each(_a)}function Sa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Na(){return this.each(Sa)}function Aa(e){var t=typeof e=="function"?e:$s(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ca(){return null}function ka(e,t){var n=typeof e=="function"?e:$s(e),o=t==null?Ca:typeof t=="function"?t:Jo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ma(){var e=this.parentNode;e&&e.removeChild(this)}function Ta(){return this.each(Ma)}function Ra(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $a(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ia(e){return this.select(e?$a:Ra)}function Da(e){return arguments.length?this.property("__data__",e):this.node().__data__}function za(e){return function(t){e.call(this,t,this.__data__)}}function Pa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Oa(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function La(e,t,n){return function(){var o=this.__on,r,s=za(t);if(o){for(var i=0,c=o.length;i<c;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function Ha(e,t,n){var o=Pa(e+""),r,s=o.length,i;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,a=c.length,u;l<a;++l)for(r=0,u=c[l];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}return}for(c=t?La:Oa,r=0;r<s;++r)this.each(c(o[r],t,n));return this}function Fs(e,t,n){var o=Os(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ba(e,t){return function(){return Fs(this,e,t)}}function Va(e,t){return function(){return Fs(this,e,t.apply(this,arguments))}}function Fa(e,t){return this.each((typeof t=="function"?Va:Ba)(e,t))}function*ja(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var js=[null];function Be(e,t){this._groups=e,this._parents=t}function En(){return new Be([[document.documentElement]],js)}function Wa(){return this}Be.prototype=En.prototype={constructor:Be,select:gl,selectAll:vl,selectChild:Sl,selectChildren:kl,filter:Ml,data:zl,enter:Tl,exit:Ol,join:Ll,merge:Hl,selection:Wa,order:Bl,sort:Vl,call:jl,nodes:Wl,node:Xl,size:Yl,empty:ql,each:Zl,attr:ta,style:sa,property:aa,classed:ha,text:ya,html:ba,raise:Ea,lower:Na,append:Aa,insert:ka,remove:Ta,clone:Ia,datum:Da,on:Ha,dispatch:Fa,[Symbol.iterator]:ja};function Je(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],js)}function Xa(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rt(e,t){if(e=Xa(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ya={passive:!1},mn={capture:!0,passive:!1};function _o(e){e.stopImmediatePropagation()}function Xt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ws(e){var t=e.document.documentElement,n=Je(e).on("dragstart.drag",Xt,mn);"onselectstart"in t?n.on("selectstart.drag",Xt,mn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xs(e,t){var n=e.document.documentElement,o=Je(e).on("dragstart.drag",null);t&&(o.on("click.drag",Xt,mn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dn=e=>()=>e;function Do(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:c,dx:l,dy:a,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:u}})}Do.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qa(e){return!e.ctrlKey&&!e.button}function Za(){return this.parentNode}function Ga(e,t){return t??{x:e.x,y:e.y}}function Ua(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ka(){var e=qa,t=Za,n=Ga,o=Ua,r={},s=lo("start","drag","end"),i=0,c,l,a,u,f=0;function h(v){v.on("mousedown.drag",d).filter(o).on("touchstart.drag",w).on("touchmove.drag",m,Ya).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(v,A){if(!(u||!e.call(this,v,A))){var $=S(this,t.call(this,v,A),v,A,"mouse");$&&(Je(v.view).on("mousemove.drag",y,mn).on("mouseup.drag",g,mn),Ws(v.view),_o(v),a=!1,c=v.clientX,l=v.clientY,$("start",v))}}function y(v){if(Xt(v),!a){var A=v.clientX-c,$=v.clientY-l;a=A*A+$*$>f}r.mouse("drag",v)}function g(v){Je(v.view).on("mousemove.drag mouseup.drag",null),Xs(v.view,a),Xt(v),r.mouse("end",v)}function w(v,A){if(e.call(this,v,A)){var $=v.changedTouches,k=t.call(this,v,A),I=$.length,D,V;for(D=0;D<I;++D)(V=S(this,k,v,A,$[D].identifier,$[D]))&&(_o(v),V("start",v,$[D]))}}function m(v){var A=v.changedTouches,$=A.length,k,I;for(k=0;k<$;++k)(I=r[A[k].identifier])&&(Xt(v),I("drag",v,A[k]))}function b(v){var A=v.changedTouches,$=A.length,k,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<$;++k)(I=r[A[k].identifier])&&(_o(v),I("end",v,A[k]))}function S(v,A,$,k,I,D){var V=s.copy(),O=rt(D||$,A),H,P,p;if((p=n.call(v,new Do("beforestart",{sourceEvent:$,target:h,identifier:I,active:i,x:O[0],y:O[1],dx:0,dy:0,dispatch:V}),k))!=null)return H=p.x-O[0]||0,P=p.y-O[1]||0,function N(_,T,z){var E=O,C;switch(_){case"start":r[I]=N,C=i++;break;case"end":delete r[I],--i;case"drag":O=rt(z||T,A),C=i;break}V.call(_,v,new Do(_,{sourceEvent:T,subject:p,target:h,identifier:I,active:C,x:O[0]+H,y:O[1]+P,dx:O[0]-E[0],dy:O[1]-E[1],dispatch:V}),k)}}return h.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Dn(!!v),h):e},h.container=function(v){return arguments.length?(t=typeof v=="function"?v:Dn(v),h):t},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Dn(v),h):n},h.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:Dn(!!v),h):o},h.on=function(){var v=s.on.apply(s,arguments);return v===s?h:v},h.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,h):Math.sqrt(f)},h}function tr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ys(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Sn(){}var gn=.7,Gn=1/gn,Yt="\\s*([+-]?\\d+)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qa=/^#([0-9a-f]{3,8})$/,Ja=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),eu=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),tu=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${yn}\\)$`),nu=new RegExp(`^rgba\\(${st},${st},${st},${yn}\\)$`),ou=new RegExp(`^hsl\\(${yn},${st},${st}\\)$`),ru=new RegExp(`^hsla\\(${yn},${st},${st},${yn}\\)$`),Cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tr(Sn,xn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kr,formatHex:kr,formatHex8:su,formatHsl:iu,formatRgb:Mr,toString:Mr});function kr(){return this.rgb().formatHex()}function su(){return this.rgb().formatHex8()}function iu(){return qs(this).formatHsl()}function Mr(){return this.rgb().formatRgb()}function xn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Tr(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ja.exec(e))?new De(t[1],t[2],t[3],1):(t=eu.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tu.exec(e))?zn(t[1],t[2],t[3],t[4]):(t=nu.exec(e))?zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ou.exec(e))?Ir(t[1],t[2]/100,t[3]/100,1):(t=ru.exec(e))?Ir(t[1],t[2]/100,t[3]/100,t[4]):Cr.hasOwnProperty(e)?Tr(Cr[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Tr(e){return new De(e>>16&255,e>>8&255,e&255,1)}function zn(e,t,n,o){return o<=0&&(e=t=n=NaN),new De(e,t,n,o)}function cu(e){return e instanceof Sn||(e=xn(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function zo(e,t,n,o){return arguments.length===1?cu(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}tr(De,zo,Ys(Sn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gn:Math.pow(gn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De($t(this.r),$t(this.g),$t(this.b),Un(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rr,formatHex:Rr,formatHex8:lu,formatRgb:$r,toString:$r}));function Rr(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}`}function lu(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}${Tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function $r(){const e=Un(this.opacity);return`${e===1?"rgb(":"rgba("}${$t(this.r)}, ${$t(this.g)}, ${$t(this.b)}${e===1?")":`, ${e})`}`}function Un(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tt(e){return e=$t(e),(e<16?"0":"")+e.toString(16)}function Ir(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new et(e,t,n,o)}function qs(e){if(e instanceof et)return new et(e.h,e.s,e.l,e.opacity);if(e instanceof Sn||(e=xn(e)),!e)return new et;if(e instanceof et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,c=s-r,l=(s+r)/2;return c?(t===s?i=(n-o)/c+(n<o)*6:n===s?i=(o-t)/c+2:i=(t-n)/c+4,c/=l<.5?s+r:2-s-r,i*=60):c=l>0&&l<1?0:i,new et(i,c,l,e.opacity)}function au(e,t,n,o){return arguments.length===1?qs(e):new et(e,t,n,o??1)}function et(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}tr(et,au,Ys(Sn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gn:Math.pow(gn,e),new et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new De(Eo(e>=240?e-240:e+120,r,o),Eo(e,r,o),Eo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new et(Dr(this.h),Pn(this.s),Pn(this.l),Un(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Un(this.opacity);return`${e===1?"hsl(":"hsla("}${Dr(this.h)}, ${Pn(this.s)*100}%, ${Pn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dr(e){return e=(e||0)%360,e<0?e+360:e}function Pn(e){return Math.max(0,Math.min(1,e||0))}function Eo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Zs=e=>()=>e;function uu(e,t){return function(n){return e+n*t}}function fu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function du(e){return(e=+e)==1?Gs:function(t,n){return n-t?fu(t,n,e):Zs(isNaN(t)?n:t)}}function Gs(e,t){var n=t-e;return n?uu(e,n):Zs(isNaN(e)?t:e)}const zr=function e(t){var n=du(t);function o(r,s){var i=n((r=zo(r)).r,(s=zo(s)).r),c=n(r.g,s.g),l=n(r.b,s.b),a=Gs(r.opacity,s.opacity);return function(u){return r.r=i(u),r.g=c(u),r.b=l(u),r.opacity=a(u),r+""}}return o.gamma=e,o}(1);function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,So=new RegExp(Po.source,"g");function hu(e){return function(){return e}}function pu(e){return function(t){return e(t)+""}}function mu(e,t){var n=Po.lastIndex=So.lastIndex=0,o,r,s,i=-1,c=[],l=[];for(e=e+"",t=t+"";(o=Po.exec(e))&&(r=So.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),c[i]?c[i]+=s:c[++i]=s),(o=o[0])===(r=r[0])?c[i]?c[i]+=r:c[++i]=r:(c[++i]=null,l.push({i,x:wt(o,r)})),n=So.lastIndex;return n<t.length&&(s=t.slice(n),c[i]?c[i]+=s:c[++i]=s),c.length<2?l[0]?pu(l[0].x):hu(t):(t=l.length,function(a){for(var u=0,f;u<t;++u)c[(f=l[u]).i]=f.x(a);return c.join("")})}var Pr=180/Math.PI,Oo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Us(e,t,n,o,r,s){var i,c,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(c=Math.sqrt(n*n+o*o))&&(n/=c,o/=c,l/=c),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Pr,skewX:Math.atan(l)*Pr,scaleX:i,scaleY:c}}var On;function gu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Oo:Us(t.a,t.b,t.c,t.d,t.e,t.f)}function yu(e){return e==null||(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",e),!(e=On.transform.baseVal.consolidate()))?Oo:(e=e.matrix,Us(e.a,e.b,e.c,e.d,e.e,e.f))}function Ks(e,t,n,o){function r(a){return a.length?a.pop()+" ":""}function s(a,u,f,h,d,y){if(a!==f||u!==h){var g=d.push("translate(",null,t,null,n);y.push({i:g-4,x:wt(a,f)},{i:g-2,x:wt(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function i(a,u,f,h){a!==u?(a-u>180?u+=360:u-a>180&&(a+=360),h.push({i:f.push(r(f)+"rotate(",null,o)-2,x:wt(a,u)})):u&&f.push(r(f)+"rotate("+u+o)}function c(a,u,f,h){a!==u?h.push({i:f.push(r(f)+"skewX(",null,o)-2,x:wt(a,u)}):u&&f.push(r(f)+"skewX("+u+o)}function l(a,u,f,h,d,y){if(a!==f||u!==h){var g=d.push(r(d)+"scale(",null,",",null,")");y.push({i:g-4,x:wt(a,f)},{i:g-2,x:wt(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(a,u){var f=[],h=[];return a=e(a),u=e(u),s(a.translateX,a.translateY,u.translateX,u.translateY,f,h),i(a.rotate,u.rotate,f,h),c(a.skewX,u.skewX,f,h),l(a.scaleX,a.scaleY,u.scaleX,u.scaleY,f,h),a=u=null,function(d){for(var y=-1,g=h.length,w;++y<g;)f[(w=h[y]).i]=w.x(d);return f.join("")}}}var xu=Ks(gu,"px, ","px)","deg)"),wu=Ks(yu,", ",")",")"),vu=1e-12;function Or(e){return((e=Math.exp(e))+1/e)/2}function bu(e){return((e=Math.exp(e))-1/e)/2}function _u(e){return((e=Math.exp(2*e))-1)/(e+1)}const Eu=function e(t,n,o){function r(s,i){var c=s[0],l=s[1],a=s[2],u=i[0],f=i[1],h=i[2],d=u-c,y=f-l,g=d*d+y*y,w,m;if(g<vu)m=Math.log(h/a)/t,w=function(k){return[c+k*d,l+k*y,a*Math.exp(t*k*m)]};else{var b=Math.sqrt(g),S=(h*h-a*a+o*g)/(2*a*n*b),v=(h*h-a*a-o*g)/(2*h*n*b),A=Math.log(Math.sqrt(S*S+1)-S),$=Math.log(Math.sqrt(v*v+1)-v);m=($-A)/t,w=function(k){var I=k*m,D=Or(A),V=a/(n*b)*(D*_u(t*I+A)-bu(A));return[c+V*d,l+V*y,a*D/Or(t*I+A)]}}return w.duration=m*1e3*t/Math.SQRT2,w}return r.rho=function(s){var i=Math.max(.001,+s),c=i*i,l=c*c;return e(i,c,l)},r}(Math.SQRT2,2,4);var Qt=0,dn=0,cn=0,Qs=1e3,Kn,hn,Qn=0,Dt=0,uo=0,wn=typeof performance=="object"&&performance.now?performance:Date,Js=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nr(){return Dt||(Js(Su),Dt=wn.now()+uo)}function Su(){Dt=0}function Jn(){this._call=this._time=this._next=null}Jn.prototype=ei.prototype={constructor:Jn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nr():+n)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:Kn=this,hn=this),this._call=e,this._time=n,Lo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lo())}};function ei(e,t,n){var o=new Jn;return o.restart(e,t,n),o}function Nu(){nr(),++Qt;for(var e=Kn,t;e;)(t=Dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qt}function Lr(){Dt=(Qn=wn.now())+uo,Qt=dn=0;try{Nu()}finally{Qt=0,Cu(),Dt=0}}function Au(){var e=wn.now(),t=e-Qn;t>Qs&&(uo-=t,Qn=e)}function Cu(){for(var e,t=Kn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kn=n);hn=e,Lo(o)}function Lo(e){if(!Qt){dn&&(dn=clearTimeout(dn));var t=e-Dt;t>24?(e<1/0&&(dn=setTimeout(Lr,e-wn.now()-uo)),cn&&(cn=clearInterval(cn))):(cn||(Qn=wn.now(),cn=setInterval(Au,Qs)),Qt=1,Js(Lr))}}function Hr(e,t,n){var o=new Jn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var ku=lo("start","end","cancel","interrupt"),Mu=[],ti=0,Br=1,Ho=2,Xn=3,Vr=4,Bo=5,Yn=6;function fo(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Tu(e,n,{name:t,index:o,group:r,on:ku,tween:Mu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ti})}function or(e,t){var n=nt(e,t);if(n.state>ti)throw new Error("too late; already scheduled");return n}function lt(e,t){var n=nt(e,t);if(n.state>Xn)throw new Error("too late; already running");return n}function nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Tu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=ei(s,0,n.time);function s(a){n.state=Br,n.timer.restart(i,n.delay,n.time),n.delay<=a&&i(a-n.delay)}function i(a){var u,f,h,d;if(n.state!==Br)return l();for(u in o)if(d=o[u],d.name===n.name){if(d.state===Xn)return Hr(i);d.state===Vr?(d.state=Yn,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[u]):+u<t&&(d.state=Yn,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[u])}if(Hr(function(){n.state===Xn&&(n.state=Vr,n.timer.restart(c,n.delay,n.time),c(a))}),n.state=Ho,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ho){for(n.state=Xn,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function c(a){for(var u=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(l),n.state=Bo,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Bo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Yn,n.timer.stop(),delete o[t];for(var a in o)return;delete e.__transition}}function qn(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>Ho&&o.state<Bo,o.state=Yn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function Ru(e){return this.each(function(){qn(this,e)})}function $u(e,t){var n,o;return function(){var r=lt(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,c=o.length;i<c;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Iu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=lt(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var c={name:t,value:n},l=0,a=r.length;l<a;++l)if(r[l].name===t){r[l]=c;break}l===a&&r.push(c)}s.tween=r}}function Du(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=nt(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?$u:Iu)(n,e,t))}function rr(e,t,n){var o=e._id;return e.each(function(){var r=lt(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return nt(r,o).value[t]}}function ni(e,t){var n;return(typeof t=="number"?wt:t instanceof xn?zr:(n=xn(t))?(t=n,zr):mu)(e,t)}function zu(e){return function(){this.removeAttribute(e)}}function Pu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ou(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function Lu(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Hu(e,t,n){var o,r,s;return function(){var i,c=n(this),l;return c==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=c+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,c)))}}function Bu(e,t,n){var o,r,s;return function(){var i,c=n(this),l;return c==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=c+"",i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,c)))}}function Vu(e,t){var n=ao(e),o=n==="transform"?wu:ni;return this.attrTween(e,typeof t=="function"?(n.local?Bu:Hu)(n,o,rr(this,"attr."+e,t)):t==null?(n.local?Pu:zu)(n):(n.local?Lu:Ou)(n,o,t))}function Fu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ju(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&ju(e,s)),n}return r._value=t,r}function Xu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&Fu(e,s)),n}return r._value=t,r}function Yu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=ao(e);return this.tween(n,(o.local?Wu:Xu)(o,t))}function qu(e,t){return function(){or(this,e).delay=+t.apply(this,arguments)}}function Zu(e,t){return t=+t,function(){or(this,e).delay=t}}function Gu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qu:Zu)(t,e)):nt(this.node(),t).delay}function Uu(e,t){return function(){lt(this,e).duration=+t.apply(this,arguments)}}function Ku(e,t){return t=+t,function(){lt(this,e).duration=t}}function Qu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Uu:Ku)(t,e)):nt(this.node(),t).duration}function Ju(e,t){if(typeof t!="function")throw new Error;return function(){lt(this,e).ease=t}}function ef(e){var t=this._id;return arguments.length?this.each(Ju(t,e)):nt(this.node(),t).ease}function tf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,e).ease=n}}function nf(e){if(typeof e!="function")throw new Error;return this.each(tf(this._id,e))}function of(e){typeof e!="function"&&(e=Ds(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,c=o[r]=[],l,a=0;a<i;++a)(l=s[a])&&e.call(l,l.__data__,a,s)&&c.push(l);return new pt(o,this._parents,this._name,this._id)}function rf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),c=0;c<s;++c)for(var l=t[c],a=n[c],u=l.length,f=i[c]=new Array(u),h,d=0;d<u;++d)(h=l[d]||a[d])&&(f[d]=h);for(;c<o;++c)i[c]=t[c];return new pt(i,this._parents,this._name,this._id)}function sf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cf(e,t,n){var o,r,s=sf(t)?or:lt;return function(){var i=s(this,e),c=i.on;c!==o&&(r=(o=c).copy()).on(t,n),i.on=r}}function lf(e,t){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(e):this.each(cf(n,e,t))}function af(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uf(){return this.on("end.remove",af(this._id))}function ff(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Jo(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var c=o[i],l=c.length,a=s[i]=new Array(l),u,f,h=0;h<l;++h)(u=c[h])&&(f=e.call(u,u.__data__,h,c))&&("__data__"in u&&(f.__data__=u.__data__),a[h]=f,fo(a[h],t,n,h,a,nt(u,n)));return new pt(s,this._parents,t,n)}function df(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Is(e));for(var o=this._groups,r=o.length,s=[],i=[],c=0;c<r;++c)for(var l=o[c],a=l.length,u,f=0;f<a;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,y=nt(u,n),g=0,w=h.length;g<w;++g)(d=h[g])&&fo(d,t,n,g,h,y);s.push(h),i.push(u)}return new pt(s,i,t,n)}var hf=En.prototype.constructor;function pf(){return new hf(this._groups,this._parents)}function mf(e,t){var n,o,r;return function(){var s=Kt(this,e),i=(this.style.removeProperty(e),Kt(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function oi(e){return function(){this.style.removeProperty(e)}}function gf(e,t,n){var o,r=n+"",s;return function(){var i=Kt(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function yf(e,t,n){var o,r,s;return function(){var i=Kt(this,e),c=n(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(e),Kt(this,e))),i===l?null:i===o&&l===r?s:(r=l,s=t(o=i,c))}}function xf(e,t){var n,o,r,s="style."+t,i="end."+s,c;return function(){var l=lt(this,e),a=l.on,u=l.value[s]==null?c||(c=oi(t)):void 0;(a!==n||r!==u)&&(o=(n=a).copy()).on(i,r=u),l.on=o}}function wf(e,t,n){var o=(e+="")=="transform"?xu:ni;return t==null?this.styleTween(e,mf(e,o)).on("end.style."+e,oi(e)):typeof t=="function"?this.styleTween(e,yf(e,o,rr(this,"style."+e,t))).each(xf(this._id,e)):this.styleTween(e,gf(e,o,t),n).on("end.style."+e,null)}function vf(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function bf(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&vf(e,i,n)),o}return s._value=t,s}function _f(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,bf(e,t,n??""))}function Ef(e){return function(){this.textContent=e}}function Sf(e){return function(){var t=e(this);this.textContent=t??""}}function Nf(e){return this.tween("text",typeof e=="function"?Sf(rr(this,"text",e)):Ef(e==null?"":e+""))}function Af(e){return function(t){this.textContent=e.call(this,t)}}function Cf(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Af(r)),t}return o._value=e,o}function kf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cf(e))}function Mf(){for(var e=this._name,t=this._id,n=ri(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],c=i.length,l,a=0;a<c;++a)if(l=i[a]){var u=nt(l,t);fo(l,e,n,a,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new pt(o,this._parents,e,n)}function Tf(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var c={value:i},l={value:function(){--r===0&&s()}};n.each(function(){var a=lt(this,o),u=a.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(l)),a.on=t}),r===0&&s()})}var Rf=0;function pt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ri(){return++Rf}var ft=En.prototype;pt.prototype={constructor:pt,select:ff,selectAll:df,selectChild:ft.selectChild,selectChildren:ft.selectChildren,filter:of,merge:rf,selection:pf,transition:Mf,call:ft.call,nodes:ft.nodes,node:ft.node,size:ft.size,empty:ft.empty,each:ft.each,on:lf,attr:Vu,attrTween:Yu,style:wf,styleTween:_f,text:Nf,textTween:kf,remove:uf,tween:Du,delay:Gu,duration:Qu,ease:ef,easeVarying:nf,end:Tf,[Symbol.iterator]:ft[Symbol.iterator]};function $f(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var If={time:null,delay:0,duration:250,ease:$f};function Df(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zf(e){var t,n;e instanceof pt?(t=e._id,e=e._name):(t=ri(),(n=If).time=nr(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],c=i.length,l,a=0;a<c;++a)(l=i[a])&&fo(l,e,t,a,i,n||Df(l,t));return new pt(o,this._parents,e,t)}En.prototype.interrupt=Ru;En.prototype.transition=zf;const Ln=e=>()=>e;function Pf(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ht(e,t,n){this.k=e,this.x=t,this.y=n}ht.prototype={constructor:ht,scale:function(e){return e===1?this:new ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _t=new ht(1,0,0);ht.prototype;function No(e){e.stopImmediatePropagation()}function ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Of(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fr(){return this.__zoom||_t}function Hf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Bf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Ff(){var e=Of,t=Lf,n=Vf,o=Hf,r=Bf,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],c=250,l=Eu,a=lo("start","zoom","end"),u,f,h,d=500,y=150,g=0,w=10;function m(p){p.property("__zoom",Fr).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",V).filter(r).on("touchstart.zoom",O).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(p,N,_,T){var z=p.selection?p.selection():p;z.property("__zoom",Fr),p!==z?A(p,N,_,T):z.interrupt().each(function(){$(this,arguments).event(T).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},m.scaleBy=function(p,N,_,T){m.scaleTo(p,function(){var z=this.__zoom.k,E=typeof N=="function"?N.apply(this,arguments):N;return z*E},_,T)},m.scaleTo=function(p,N,_,T){m.transform(p,function(){var z=t.apply(this,arguments),E=this.__zoom,C=_==null?v(z):typeof _=="function"?_.apply(this,arguments):_,R=E.invert(C),B=typeof N=="function"?N.apply(this,arguments):N;return n(S(b(E,B),C,R),z,i)},_,T)},m.translateBy=function(p,N,_,T){m.transform(p,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),i)},null,T)},m.translateTo=function(p,N,_,T,z){m.transform(p,function(){var E=t.apply(this,arguments),C=this.__zoom,R=T==null?v(E):typeof T=="function"?T.apply(this,arguments):T;return n(_t.translate(R[0],R[1]).scale(C.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof _=="function"?-_.apply(this,arguments):-_),E,i)},T,z)};function b(p,N){return N=Math.max(s[0],Math.min(s[1],N)),N===p.k?p:new ht(N,p.x,p.y)}function S(p,N,_){var T=N[0]-_[0]*p.k,z=N[1]-_[1]*p.k;return T===p.x&&z===p.y?p:new ht(p.k,T,z)}function v(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function A(p,N,_,T){p.on("start.zoom",function(){$(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(T).end()}).tween("zoom",function(){var z=this,E=arguments,C=$(z,E).event(T),R=t.apply(z,E),B=_==null?v(R):typeof _=="function"?_.apply(z,E):_,X=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),W=z.__zoom,U=typeof N=="function"?N.apply(z,E):N,Q=l(W.invert(B).concat(X/W.k),U.invert(B).concat(X/U.k));return function(Z){if(Z===1)Z=U;else{var ne=Q(Z),J=X/ne[2];Z=new ht(J,B[0]-ne[0]*J,B[1]-ne[1]*J)}C.zoom(null,Z)}})}function $(p,N,_){return!_&&p.__zooming||new k(p,N)}function k(p,N){this.that=p,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,N),this.taps=0}k.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,N){return this.mouse&&p!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var N=Je(this.that).datum();a.call(p,this.that,new Pf(p,{sourceEvent:this.sourceEvent,target:m,type:p,transform:this.that.__zoom,dispatch:a}),N)}};function I(p,...N){if(!e.apply(this,arguments))return;var _=$(this,N).event(p),T=this.__zoom,z=Math.max(s[0],Math.min(s[1],T.k*Math.pow(2,o.apply(this,arguments)))),E=rt(p);if(_.wheel)(_.mouse[0][0]!==E[0]||_.mouse[0][1]!==E[1])&&(_.mouse[1]=T.invert(_.mouse[0]=E)),clearTimeout(_.wheel);else{if(T.k===z)return;_.mouse=[E,T.invert(E)],qn(this),_.start()}ln(p),_.wheel=setTimeout(C,y),_.zoom("mouse",n(S(b(T,z),_.mouse[0],_.mouse[1]),_.extent,i));function C(){_.wheel=null,_.end()}}function D(p,...N){if(h||!e.apply(this,arguments))return;var _=p.currentTarget,T=$(this,N,!0).event(p),z=Je(p.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",X,!0),E=rt(p,_),C=p.clientX,R=p.clientY;Ws(p.view),No(p),T.mouse=[E,this.__zoom.invert(E)],qn(this),T.start();function B(W){if(ln(W),!T.moved){var U=W.clientX-C,Q=W.clientY-R;T.moved=U*U+Q*Q>g}T.event(W).zoom("mouse",n(S(T.that.__zoom,T.mouse[0]=rt(W,_),T.mouse[1]),T.extent,i))}function X(W){z.on("mousemove.zoom mouseup.zoom",null),Xs(W.view,T.moved),ln(W),T.event(W).end()}}function V(p,...N){if(e.apply(this,arguments)){var _=this.__zoom,T=rt(p.changedTouches?p.changedTouches[0]:p,this),z=_.invert(T),E=_.k*(p.shiftKey?.5:2),C=n(S(b(_,E),T,z),t.apply(this,N),i);ln(p),c>0?Je(this).transition().duration(c).call(A,C,T,p):Je(this).call(m.transform,C,T,p)}}function O(p,...N){if(e.apply(this,arguments)){var _=p.touches,T=_.length,z=$(this,N,p.changedTouches.length===T).event(p),E,C,R,B;for(No(p),C=0;C<T;++C)R=_[C],B=rt(R,this),B=[B,this.__zoom.invert(B),R.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,E=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),E&&(z.taps<2&&(f=B[0],u=setTimeout(function(){u=null},d)),qn(this),z.start())}}function H(p,...N){if(this.__zooming){var _=$(this,N).event(p),T=p.changedTouches,z=T.length,E,C,R,B;for(ln(p),E=0;E<z;++E)C=T[E],R=rt(C,this),_.touch0&&_.touch0[2]===C.identifier?_.touch0[0]=R:_.touch1&&_.touch1[2]===C.identifier&&(_.touch1[0]=R);if(C=_.that.__zoom,_.touch1){var X=_.touch0[0],W=_.touch0[1],U=_.touch1[0],Q=_.touch1[1],Z=(Z=U[0]-X[0])*Z+(Z=U[1]-X[1])*Z,ne=(ne=Q[0]-W[0])*ne+(ne=Q[1]-W[1])*ne;C=b(C,Math.sqrt(Z/ne)),R=[(X[0]+U[0])/2,(X[1]+U[1])/2],B=[(W[0]+Q[0])/2,(W[1]+Q[1])/2]}else if(_.touch0)R=_.touch0[0],B=_.touch0[1];else return;_.zoom("touch",n(S(C,R,B),_.extent,i))}}function P(p,...N){if(this.__zooming){var _=$(this,N).event(p),T=p.changedTouches,z=T.length,E,C;for(No(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),E=0;E<z;++E)C=T[E],_.touch0&&_.touch0[2]===C.identifier?delete _.touch0:_.touch1&&_.touch1[2]===C.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(C=rt(C,this),Math.hypot(f[0]-C[0],f[1]-C[1])<w)){var R=Je(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return m.wheelDelta=function(p){return arguments.length?(o=typeof p=="function"?p:Ln(+p),m):o},m.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Ln(!!p),m):e},m.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Ln(!!p),m):r},m.extent=function(p){return arguments.length?(t=typeof p=="function"?p:Ln([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),m):t},m.scaleExtent=function(p){return arguments.length?(s[0]=+p[0],s[1]=+p[1],m):[s[0],s[1]]},m.translateExtent=function(p){return arguments.length?(i[0][0]=+p[0][0],i[1][0]=+p[1][0],i[0][1]=+p[0][1],i[1][1]=+p[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(p){return arguments.length?(n=p,m):n},m.duration=function(p){return arguments.length?(c=+p,m):c},m.interpolate=function(p){return arguments.length?(l=p,m):l},m.on=function(){var p=a.on.apply(a,arguments);return p===a?m:p},m.clickDistance=function(p){return arguments.length?(g=(p=+p)*p,m):Math.sqrt(g)},m.tapDistance=function(p){return arguments.length?(w=+p,m):w},m}const ho=x.createContext(null),jf=ho.Provider,mt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},si=mt.error001();function he(e,t){const n=x.useContext(ho);if(n===null)throw new Error(si);return Rs(n,e,t)}const _e=()=>{const e=x.useContext(ho);if(e===null)throw new Error(si);return x.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Wf=e=>e.userSelectionActive?"none":"all";function ii({position:e,children:t,className:n,style:o,...r}){const s=he(Wf),i=`${e}`.split("-");return M.createElement("div",{className:Re(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},t)}function Xf({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:M.createElement(ii,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},M.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Yf=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:c=2,children:l,className:a,...u})=>{const f=x.useRef(null),[h,d]=x.useState({x:0,y:0,width:0,height:0}),y=Re(["react-flow__edge-textwrapper",a]);return x.useEffect(()=>{if(f.current){const g=f.current.getBBox();d({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:M.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...u},r&&M.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),M.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:o},n),l)};var qf=x.memo(Yf);const sr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Jt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ir=(e={x:0,y:0},t)=>({x:Jt(e.x,t[0][0],t[1][0]),y:Jt(e.y,t[0][1],t[1][1])}),jr=(e,t,n)=>e<t?Jt(Math.abs(e-t),1,50)/50:e>n?-Jt(Math.abs(e-n),1,50)/50:0,ci=(e,t)=>{const n=jr(e.x,35,t.width-35)*20,o=jr(e.y,35,t.height-35)*20;return[n,o]},li=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Zf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),cr=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Gf=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Wr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Vo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Uf=e=>Ge(e.width)&&Ge(e.height)&&Ge(e.x)&&Ge(e.y),Ge=e=>!isNaN(e)&&isFinite(e),de=Symbol.for("internals"),ai=["Enter"," ","Escape"],Kf=(e,t)=>{},Qf=e=>"nativeEvent"in e;function Fo(e){var r,s;const t=Qf(e)?e.nativeEvent:e,n=((s=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const ui=e=>"clientX"in e,Et=(e,t)=>{var s,i;const n=ui(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},eo=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Nn=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a,style:u,markerEnd:f,markerStart:h,interactionWidth:d=20})=>M.createElement(M.Fragment,null,M.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),d&&M.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&Ge(n)&&Ge(o)?M.createElement(qf,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a}):null);Nn.displayName="BaseEdge";function an(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(s=>s.id===e);r&&n(o,{...r})}}function fi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,c=o<t?o+i:o-i;return[s,c,r,i]}function di({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:c}){const l=e*.125+r*.375+i*.375+n*.125,a=t*.125+s*.375+c*.375+o*.125,u=Math.abs(l-e),f=Math.abs(a-t);return[l,a,u,f]}var zt;(function(e){e.Strict="strict",e.Loose="loose"})(zt||(zt={}));var Rt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Rt||(Rt={}));var vn;(function(e){e.Partial="partial",e.Full="full"})(vn||(vn={}));var bt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(bt||(bt={}));var to;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(to||(to={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Xr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===Y.Left||e===Y.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function hi({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top}){const[i,c]=Xr({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,a]=Xr({pos:s,x1:o,y1:r,x2:e,y2:t}),[u,f,h,d]=di({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:c,targetControlX:l,targetControlY:a});return[`M${e},${t} C${i},${c} ${l},${a} ${o},${r}`,u,f,h,d]}const lr=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:y,interactionWidth:g})=>{const[w,m,b]=hi({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return M.createElement(Nn,{path:w,labelX:m,labelY:b,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:y,interactionWidth:g})});lr.displayName="SimpleBezierEdge";const Yr={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Jf=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},qr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ed({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:s}){const i=Yr[t],c=Yr[o],l={x:e.x+i.x*s,y:e.y+i.y*s},a={x:n.x+c.x*s,y:n.y+c.y*s},u=Jf({source:l,sourcePosition:t,target:a}),f=u.x!==0?"x":"y",h=u[f];let d=[],y,g;const w={x:0,y:0},m={x:0,y:0},[b,S,v,A]=fi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*c[f]===-1){y=r.x??b,g=r.y??S;const k=[{x:y,y:l.y},{x:y,y:a.y}],I=[{x:l.x,y:g},{x:a.x,y:g}];i[f]===h?d=f==="x"?k:I:d=f==="x"?I:k}else{const k=[{x:l.x,y:a.y}],I=[{x:a.x,y:l.y}];if(f==="x"?d=i.x===h?I:k:d=i.y===h?k:I,t===o){const P=Math.abs(e[f]-n[f]);if(P<=s){const p=Math.min(s-1,s-P);i[f]===h?w[f]=(l[f]>e[f]?-1:1)*p:m[f]=(a[f]>n[f]?-1:1)*p}}if(t!==o){const P=f==="x"?"y":"x",p=i[f]===c[P],N=l[P]>a[P],_=l[P]<a[P];(i[f]===1&&(!p&&N||p&&_)||i[f]!==1&&(!p&&_||p&&N))&&(d=f==="x"?k:I)}const D={x:l.x+w.x,y:l.y+w.y},V={x:a.x+m.x,y:a.y+m.y},O=Math.max(Math.abs(D.x-d[0].x),Math.abs(V.x-d[0].x)),H=Math.max(Math.abs(D.y-d[0].y),Math.abs(V.y-d[0].y));O>=H?(y=(D.x+V.x)/2,g=d[0].y):(y=d[0].x,g=(D.y+V.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...d,{x:a.x+m.x,y:a.y+m.y},n],y,g,v,A]}function td(e,t,n,o){const r=Math.min(qr(e,t)/2,qr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const a=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+r*a},${i}Q ${s},${i} ${s},${i+r*u}`}const c=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${i+r*l}Q ${s},${i} ${s+r*c},${i}`}function jo({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,borderRadius:i=5,centerX:c,centerY:l,offset:a=20}){const[u,f,h,d,y]=ed({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:c,y:l},offset:a});return[u.reduce((w,m,b)=>{let S="";return b>0&&b<u.length-1?S=td(u[b-1],m,u[b+1],i):S=`${b===0?"M":"L"}${m.x} ${m.y}`,w+=S,w},""),f,h,d,y]}const po=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a,style:u,sourcePosition:f=Y.Bottom,targetPosition:h=Y.Top,markerEnd:d,markerStart:y,pathOptions:g,interactionWidth:w})=>{const[m,b,S]=jo({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:h,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return M.createElement(Nn,{path:m,labelX:b,labelY:S,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a,style:u,markerEnd:d,markerStart:y,interactionWidth:w})});po.displayName="SmoothStepEdge";const ar=x.memo(e=>{var t;return M.createElement(po,{...e,pathOptions:x.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});ar.displayName="StepEdge";function nd({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,c]=fi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,c]}const ur=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a,style:u,markerEnd:f,markerStart:h,interactionWidth:d})=>{const[y,g,w]=nd({sourceX:e,sourceY:t,targetX:n,targetY:o});return M.createElement(Nn,{path:y,labelX:g,labelY:w,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:a,style:u,markerEnd:f,markerStart:h,interactionWidth:d})});ur.displayName="StraightEdge";function Hn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case Y.Left:return[t-Hn(t-o,s),n];case Y.Right:return[t+Hn(o-t,s),n];case Y.Top:return[t,n-Hn(n-r,s)];case Y.Bottom:return[t,n+Hn(r-n,s)]}}function pi({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,curvature:i=.25}){const[c,l]=Zr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[a,u]=Zr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[f,h,d,y]=di({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:c,sourceControlY:l,targetControlX:a,targetControlY:u});return[`M${e},${t} C${c},${l} ${a},${u} ${o},${r}`,f,h,d,y]}const no=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:y,pathOptions:g,interactionWidth:w})=>{const[m,b,S]=pi({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:g==null?void 0:g.curvature});return M.createElement(Nn,{path:m,labelX:b,labelY:S,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:y,interactionWidth:w})});no.displayName="BezierEdge";const fr=x.createContext(null),od=fr.Provider;fr.Consumer;const mi=()=>x.useContext(fr),rd=e=>"id"in e&&"source"in e&&"target"in e,sd=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Wo=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,id=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),cd=(e,t)=>{if(!e.source||!e.target)return t;let n;return rd(e)?n={...e}:n={...e,id:sd(e)},id(n,t)?t:t.concat(n)},Xo=({x:e,y:t},[n,o,r],s,[i,c])=>{const l={x:(e-n)/r,y:(t-o)/r};return s?{x:i*Math.round(l.x/i),y:c*Math.round(l.y/c)}:l},gi=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),qt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},mo=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:s,y:i}=qt(r,t).positionAbsolute;return Zf(o,cr({x:s,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Gf(n)},yi=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1,c=[0,0])=>{const l={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},a=[];return e.forEach(u=>{const{width:f,height:h,selectable:d=!0,hidden:y=!1}=u;if(i&&!d||y)return!1;const{positionAbsolute:g}=qt(u,c),w={x:g.x,y:g.y,width:f||0,height:h||0},m=Vo(l,w),b=typeof f>"u"||typeof h>"u"||f===null||h===null,S=s&&m>0,v=(f||0)*(h||0);(b||S||m>=v||u.dragging)&&a.push(u)}),a},xi=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},wi=(e,t,n,o,r,s=.1)=>{const i=t/(e.width*(1+s)),c=n/(e.height*(1+s)),l=Math.min(i,c),a=Jt(l,o,r),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*a,d=n/2-f*a;return{x:h,y:d,zoom:a}},Mt=(e,t=0)=>e.transition().duration(t);function Gr(e,t,n,o){return(t[n]||[]).reduce((r,s)=>{var i,c;return`${e.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((c=e.positionAbsolute)==null?void 0:c.y)??0)+s.y+s.height/2}),r},[])}function ld(e,t,n,o,r,s){const{x:i,y:c}=Et(e),a=t.elementsFromPoint(i,c).find(y=>y.classList.contains("react-flow__handle"));if(a){const y=a.getAttribute("data-nodeid");if(y){const g=dr(void 0,a),w=a.getAttribute("data-handleid"),m=s({nodeId:y,id:w,type:g});if(m){const b=r.find(S=>S.nodeId===y&&S.type===g&&S.id===w);return{handle:{id:w,type:g,nodeId:y,x:(b==null?void 0:b.x)||n.x,y:(b==null?void 0:b.y)||n.y},validHandleResult:m}}}}let u=[],f=1/0;if(r.forEach(y=>{const g=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(g<=o){const w=s(y);g<=f&&(g<f?u=[{handle:y,validHandleResult:w}]:g===f&&u.push({handle:y,validHandleResult:w}),f=g)}}),!u.length)return{handle:null,validHandleResult:vi()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:y})=>y.isValid),d=u.some(({handle:y})=>y.type==="target");return u.find(({handle:y,validHandleResult:g})=>d?y.type==="target":h?g.isValid:!0)||u[0]}const ad={source:null,target:null,sourceHandle:null,targetHandle:null},vi=()=>({handleDomNode:null,isValid:!1,connection:ad,endHandle:null});function bi(e,t,n,o,r,s,i){const c=r==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),a={...vi(),handleDomNode:l};if(l){const u=dr(void 0,l),f=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),g={source:c?f:n,sourceHandle:c?h:o,target:c?n:f,targetHandle:c?o:h};a.connection=g,d&&y&&(t===zt.Strict?c&&u==="source"||!c&&u==="target":f!==n||h!==o)&&(a.endHandle={nodeId:f,handleId:h,type:u},a.isValid=s(g))}return a}function ud({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,s)=>{if(s[de]){const{handleBounds:i}=s[de];let c=[],l=[];i&&(c=Gr(s,i,"source",`${t}-${n}-${o}`),l=Gr(s,i,"target",`${t}-${n}-${o}`)),r.push(...c,...l)}return r},[])}function dr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ao(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function fd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function _i({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:c,edgeUpdaterType:l,onEdgeUpdateEnd:a}){const u=li(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:d,connectionRadius:y,onConnectStart:g,panBy:w,getNodes:m,cancelConnection:b}=s();let S=0,v;const{x:A,y:$}=Et(e),k=u==null?void 0:u.elementFromPoint(A,$),I=dr(l,k),D=h==null?void 0:h.getBoundingClientRect();if(!D||!I)return;let V,O=Et(e,D),H=!1,P=null,p=!1,N=null;const _=ud({nodes:m(),nodeId:n,handleId:t,handleType:I}),T=()=>{if(!d)return;const[C,R]=ci(O,D);w({x:C,y:R}),S=requestAnimationFrame(T)};i({connectionPosition:O,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:I,connectionStartHandle:{nodeId:n,handleId:t,type:I},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:I});function z(C){const{transform:R}=s();O=Et(C,D);const{handle:B,validHandleResult:X}=ld(C,u,Xo(O,R,!1,[1,1]),y,_,W=>bi(W,f,n,t,r?"target":"source",c,u));if(v=B,H||(T(),H=!0),N=X.handleDomNode,P=X.connection,p=X.isValid,i({connectionPosition:v&&p?gi({x:v.x,y:v.y},R):O,connectionStatus:fd(!!v,p),connectionEndHandle:X.endHandle}),!v&&!p&&!N)return Ao(V);P.source!==P.target&&N&&(Ao(V),V=N,N.classList.add("connecting","react-flow__handle-connecting"),N.classList.toggle("valid",p),N.classList.toggle("react-flow__handle-valid",p))}function E(C){var R,B;(v||N)&&P&&p&&(o==null||o(P)),(B=(R=s()).onConnectEnd)==null||B.call(R,C),l&&(a==null||a(C)),Ao(V),b(),cancelAnimationFrame(S),H=!1,p=!1,P=null,N=null,u.removeEventListener("mousemove",z),u.removeEventListener("mouseup",E),u.removeEventListener("touchmove",z),u.removeEventListener("touchend",E)}u.addEventListener("mousemove",z),u.addEventListener("mouseup",E),u.addEventListener("touchmove",z),u.addEventListener("touchend",E)}const Ur=()=>!0,dd=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),hd=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:i}=o;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Ei=x.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:c,children:l,className:a,onMouseDown:u,onTouchStart:f,...h},d)=>{var D,V;const y=i||null,g=e==="target",w=_e(),m=mi(),{connectOnClick:b,noPanClassName:S}=he(dd,Ce),{connecting:v,clickConnecting:A}=he(hd(m,y,e),Ce);m||(V=(D=w.getState()).onError)==null||V.call(D,"010",mt.error010());const $=O=>{const{defaultEdgeOptions:H,onConnect:P,hasDefaultEdges:p}=w.getState(),N={...H,...O};if(p){const{edges:_,setEdges:T}=w.getState();T(cd(N,_))}P==null||P(N),c==null||c(N)},k=O=>{if(!m)return;const H=ui(O);r&&(H&&O.button===0||!H)&&_i({event:O,handleId:y,nodeId:m,onConnect:$,isTarget:g,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Ur}),H?u==null||u(O):f==null||f(O)},I=O=>{const{onClickConnectStart:H,onClickConnectEnd:P,connectionClickStartHandle:p,connectionMode:N,isValidConnection:_}=w.getState();if(!m||!p&&!r)return;if(!p){H==null||H(O,{nodeId:m,handleId:y,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:y}});return}const T=li(O.target),z=n||_||Ur,{connection:E,isValid:C}=bi({nodeId:m,id:y,type:e},N,p.nodeId,p.handleId||null,p.type,z,T);C&&$(E),P==null||P(O),w.setState({connectionClickStartHandle:null})};return M.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${y}-${e}`,className:Re(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,a,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:s,connecting:A,connectionindicator:o&&(r&&!v||s&&v)}]),onMouseDown:k,onTouchStart:k,onClick:b?I:void 0,ref:d,...h},l)});Ei.displayName="Handle";var en=x.memo(Ei);const Si=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:o=Y.Bottom})=>M.createElement(M.Fragment,null,M.createElement(en,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,M.createElement(en,{type:"source",position:o,isConnectable:t}));Si.displayName="DefaultNode";var Yo=x.memo(Si);const Ni=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>M.createElement(M.Fragment,null,e==null?void 0:e.label,M.createElement(en,{type:"source",position:n,isConnectable:t}));Ni.displayName="InputNode";var Ai=x.memo(Ni);const Ci=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>M.createElement(M.Fragment,null,M.createElement(en,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ci.displayName="OutputNode";var ki=x.memo(Ci);const hr=()=>null;hr.displayName="GroupNode";const pd=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Bn=e=>e.id;function md(e,t){return Ce(e.selectedNodes.map(Bn),t.selectedNodes.map(Bn))&&Ce(e.selectedEdges.map(Bn),t.selectedEdges.map(Bn))}const Mi=x.memo(({onSelectionChange:e})=>{const t=_e(),{selectedNodes:n,selectedEdges:o}=he(pd,md);return x.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChange.forEach(s=>s(r))},[n,o,e]),null});Mi.displayName="SelectionListener";const gd=e=>!!e.onSelectionChange;function yd({onSelectionChange:e}){const t=he(gd);return e||t?M.createElement(Mi,{onSelectionChange:e}):null}const xd=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ht(e,t){x.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function te(e,t,n){x.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const wd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:c,onClickConnectEnd:l,nodesDraggable:a,nodesConnectable:u,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:d,elevateNodesOnSelect:y,minZoom:g,maxZoom:w,nodeExtent:m,onNodesChange:b,onEdgesChange:S,elementsSelectable:v,connectionMode:A,snapGrid:$,snapToGrid:k,translateExtent:I,connectOnClick:D,defaultEdgeOptions:V,fitView:O,fitViewOptions:H,onNodesDelete:P,onEdgesDelete:p,onNodeDrag:N,onNodeDragStart:_,onNodeDragStop:T,onSelectionDrag:z,onSelectionDragStart:E,onSelectionDragStop:C,noPanClassName:R,nodeOrigin:B,rfId:X,autoPanOnConnect:W,autoPanOnNodeDrag:U,onError:Q,connectionRadius:Z,isValidConnection:ne,nodeDragThreshold:J})=>{const{setNodes:ee,setEdges:le,setDefaultNodesAndEdges:pe,setMinZoom:Ee,setMaxZoom:ae,setTranslateExtent:oe,setNodeExtent:ye,reset:se}=he(xd,Ce),F=_e();return x.useEffect(()=>{const we=o==null?void 0:o.map(ze=>({...ze,...V}));return pe(n,we),()=>{se()}},[]),te("defaultEdgeOptions",V,F.setState),te("connectionMode",A,F.setState),te("onConnect",r,F.setState),te("onConnectStart",s,F.setState),te("onConnectEnd",i,F.setState),te("onClickConnectStart",c,F.setState),te("onClickConnectEnd",l,F.setState),te("nodesDraggable",a,F.setState),te("nodesConnectable",u,F.setState),te("nodesFocusable",f,F.setState),te("edgesFocusable",h,F.setState),te("edgesUpdatable",d,F.setState),te("elementsSelectable",v,F.setState),te("elevateNodesOnSelect",y,F.setState),te("snapToGrid",k,F.setState),te("snapGrid",$,F.setState),te("onNodesChange",b,F.setState),te("onEdgesChange",S,F.setState),te("connectOnClick",D,F.setState),te("fitViewOnInit",O,F.setState),te("fitViewOnInitOptions",H,F.setState),te("onNodesDelete",P,F.setState),te("onEdgesDelete",p,F.setState),te("onNodeDrag",N,F.setState),te("onNodeDragStart",_,F.setState),te("onNodeDragStop",T,F.setState),te("onSelectionDrag",z,F.setState),te("onSelectionDragStart",E,F.setState),te("onSelectionDragStop",C,F.setState),te("noPanClassName",R,F.setState),te("nodeOrigin",B,F.setState),te("rfId",X,F.setState),te("autoPanOnConnect",W,F.setState),te("autoPanOnNodeDrag",U,F.setState),te("onError",Q,F.setState),te("connectionRadius",Z,F.setState),te("isValidConnection",ne,F.setState),te("nodeDragThreshold",J,F.setState),Ht(e,ee),Ht(t,le),Ht(g,Ee),Ht(w,ae),Ht(I,oe),Ht(m,ye),null},Kr={display:"none"},vd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ti="react-flow__node-desc",Ri="react-flow__edge-desc",bd="react-flow__aria-live",_d=e=>e.ariaLiveMessage;function Ed({rfId:e}){const t=he(_d);return M.createElement("div",{id:`${bd}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:vd},t)}function Sd({rfId:e,disableKeyboardA11y:t}){return M.createElement(M.Fragment,null,M.createElement("div",{id:`${Ti}-${e}`,style:Kr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),M.createElement("div",{id:`${Ri}-${e}`,style:Kr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&M.createElement(Ed,{rfId:e}))}var bn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=x.useState(!1),r=x.useRef(!1),s=x.useRef(new Set([])),[i,c]=x.useMemo(()=>{if(e!==null){const a=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=a.reduce((f,h)=>f.concat(...h),[]);return[a,u]}return[[],[]]},[e]);return x.useEffect(()=>{const l=typeof document<"u"?document:null,a=(t==null?void 0:t.target)||l;if(e!==null){const u=d=>{if(r.current=d.ctrlKey||d.metaKey||d.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Fo(d))return!1;const g=Jr(d.code,c);s.current.add(d[g]),Qr(i,s.current,!1)&&(d.preventDefault(),o(!0))},f=d=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Fo(d))return!1;const g=Jr(d.code,c);Qr(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(d[g]),d.key==="Meta"&&s.current.clear(),r.current=!1},h=()=>{s.current.clear(),o(!1)};return a==null||a.addEventListener("keydown",u),a==null||a.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{a==null||a.removeEventListener("keydown",u),a==null||a.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,o]),n};function Qr(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Jr(e,t){return t.includes(e)?"code":"key"}function $i(e,t,n,o){var c,l;const r=e.parentNode||e.parentId;if(!r)return n;const s=t.get(r),i=qt(s,o);return $i(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((c=s[de])==null?void 0:c.z)??0)>(n.z??0)?((l=s[de])==null?void 0:l.z)??0:n.z??0},o)}function Ii(e,t,n){e.forEach(o=>{var s;const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:i,y:c,z:l}=$i(o,e,{...o.position,z:((s=o[de])==null?void 0:s.z)??0},t);o.positionAbsolute={x:i,y:c},o[de].z=l,n!=null&&n[o.id]&&(o[de].isParent=!0)}})}function Co(e,t,n,o){const r=new Map,s={},i=o?1e3:0;return e.forEach(c=>{var d;const l=(Ge(c.zIndex)?c.zIndex:0)+(c.selected?i:0),a=t.get(c.id),u={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},f=c.parentNode||c.parentId;f&&(s[f]=!0);const h=(a==null?void 0:a.type)&&(a==null?void 0:a.type)!==c.type;Object.defineProperty(u,de,{enumerable:!1,value:{handleBounds:h||(d=a==null?void 0:a[de])==null?void 0:d.handleBounds,z:l}}),r.set(c.id,u)}),Ii(r,n,s),r}function Di(e,t={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:c,d3Selection:l,fitViewOnInitDone:a,fitViewOnInit:u,nodeOrigin:f}=e(),h=t.initial&&!a&&u;if(c&&l&&(h||!t.initial)){const y=n().filter(w=>{var b;const m=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(b=t.nodes)!=null&&b.length?m&&t.nodes.some(S=>S.id===w.id):m}),g=y.every(w=>w.width&&w.height);if(y.length>0&&g){const w=mo(y,f),{x:m,y:b,zoom:S}=wi(w,o,r,t.minZoom??s,t.maxZoom??i,t.padding??.1),v=_t.translate(m,b).scale(S);return typeof t.duration=="number"&&t.duration>0?c.transform(Mt(l,t.duration),v):c.transform(l,v),!0}}return!1}function Nd(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[de]:o[de],selected:n.selected})}),new Map(t)}function Ad(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Vn({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:c,hasDefaultNodes:l,hasDefaultEdges:a}=n();e!=null&&e.length&&(l&&o({nodeInternals:Nd(e,r)}),i==null||i(e)),t!=null&&t.length&&(a&&o({edges:Ad(t,s)}),c==null||c(t))}const Bt=()=>{},Cd={zoomIn:Bt,zoomOut:Bt,zoomTo:Bt,getZoom:()=>1,setViewport:Bt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Bt,fitBounds:Bt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},kd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Md=()=>{const e=_e(),{d3Zoom:t,d3Selection:n}=he(kd,Ce);return x.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Mt(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(Mt(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>t.scaleTo(Mt(n,s==null?void 0:s.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,s)=>{const[i,c,l]=e.getState().transform,a=_t.translate(r.x??i,r.y??c).scale(r.zoom??l);t.transform(Mt(n,s==null?void 0:s.duration),a)},getViewport:()=>{const[r,s,i]=e.getState().transform;return{x:r,y:s,zoom:i}},fitView:r=>Di(e.getState,r),setCenter:(r,s,i)=>{const{width:c,height:l,maxZoom:a}=e.getState(),u=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:a,f=c/2-r*u,h=l/2-s*u,d=_t.translate(f,h).scale(u);t.transform(Mt(n,i==null?void 0:i.duration),d)},fitBounds:(r,s)=>{const{width:i,height:c,minZoom:l,maxZoom:a}=e.getState(),{x:u,y:f,zoom:h}=wi(r,i,c,l,a,(s==null?void 0:s.padding)??.1),d=_t.translate(u,f).scale(h);t.transform(Mt(n,s==null?void 0:s.duration),d)},project:r=>{const{transform:s,snapToGrid:i,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Xo(r,s,i,c)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:i,snapGrid:c,domNode:l}=e.getState();if(!l)return r;const{x:a,y:u}=l.getBoundingClientRect(),f={x:r.x-a,y:r.y-u};return Xo(f,s,i,c)},flowToScreenPosition:r=>{const{transform:s,domNode:i}=e.getState();if(!i)return r;const{x:c,y:l}=i.getBoundingClientRect(),a=gi(r,s);return{x:a.x+c,y:a.y+l}},viewportInitialized:!0}:Cd,[t,n])};function pr(){const e=Md(),t=_e(),n=x.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),o=x.useCallback(g=>t.getState().nodeInternals.get(g),[]),r=x.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(w=>({...w}))},[]),s=x.useCallback(g=>{const{edges:w=[]}=t.getState();return w.find(m=>m.id===g)},[]),i=x.useCallback(g=>{const{getNodes:w,setNodes:m,hasDefaultNodes:b,onNodesChange:S}=t.getState(),v=w(),A=typeof g=="function"?g(v):g;if(b)m(A);else if(S){const $=A.length===0?v.map(k=>({type:"remove",id:k.id})):A.map(k=>({item:k,type:"reset"}));S($)}},[]),c=x.useCallback(g=>{const{edges:w=[],setEdges:m,hasDefaultEdges:b,onEdgesChange:S}=t.getState(),v=typeof g=="function"?g(w):g;if(b)m(v);else if(S){const A=v.length===0?w.map($=>({type:"remove",id:$.id})):v.map($=>({item:$,type:"reset"}));S(A)}},[]),l=x.useCallback(g=>{const w=Array.isArray(g)?g:[g],{getNodes:m,setNodes:b,hasDefaultNodes:S,onNodesChange:v}=t.getState();if(S){const $=[...m(),...w];b($)}else if(v){const A=w.map($=>({item:$,type:"add"}));v(A)}},[]),a=x.useCallback(g=>{const w=Array.isArray(g)?g:[g],{edges:m=[],setEdges:b,hasDefaultEdges:S,onEdgesChange:v}=t.getState();if(S)b([...m,...w]);else if(v){const A=w.map($=>({item:$,type:"add"}));v(A)}},[]),u=x.useCallback(()=>{const{getNodes:g,edges:w=[],transform:m}=t.getState(),[b,S,v]=m;return{nodes:g().map(A=>({...A})),edges:w.map(A=>({...A})),viewport:{x:b,y:S,zoom:v}}},[]),f=x.useCallback(({nodes:g,edges:w})=>{const{nodeInternals:m,getNodes:b,edges:S,hasDefaultNodes:v,hasDefaultEdges:A,onNodesDelete:$,onEdgesDelete:k,onNodesChange:I,onEdgesChange:D}=t.getState(),V=(g||[]).map(N=>N.id),O=(w||[]).map(N=>N.id),H=b().reduce((N,_)=>{const T=_.parentNode||_.parentId,z=!V.includes(_.id)&&T&&N.find(C=>C.id===T);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(V.includes(_.id)||z)&&N.push(_),N},[]),P=S.filter(N=>typeof N.deletable=="boolean"?N.deletable:!0),p=P.filter(N=>O.includes(N.id));if(H||p){const N=xi(H,P),_=[...p,...N],T=_.reduce((z,E)=>(z.includes(E.id)||z.push(E.id),z),[]);if((A||v)&&(A&&t.setState({edges:S.filter(z=>!T.includes(z.id))}),v&&(H.forEach(z=>{m.delete(z.id)}),t.setState({nodeInternals:new Map(m)}))),T.length>0&&(k==null||k(_),D&&D(T.map(z=>({id:z,type:"remove"})))),H.length>0&&($==null||$(H),I)){const z=H.map(E=>({id:E.id,type:"remove"}));I(z)}}},[]),h=x.useCallback(g=>{const w=Uf(g),m=w?null:t.getState().nodeInternals.get(g.id);return!w&&!m?[null,null,w]:[w?g:Wr(m),m,w]},[]),d=x.useCallback((g,w=!0,m)=>{const[b,S,v]=h(g);return b?(m||t.getState().getNodes()).filter(A=>{if(!v&&(A.id===S.id||!A.positionAbsolute))return!1;const $=Wr(A),k=Vo($,b);return w&&k>0||k>=b.width*b.height}):[]},[]),y=x.useCallback((g,w,m=!0)=>{const[b]=h(g);if(!b)return!1;const S=Vo(b,w);return m&&S>0||S>=b.width*b.height},[]);return x.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:c,addNodes:l,addEdges:a,toObject:u,deleteElements:f,getIntersectingNodes:d,isNodeIntersecting:y}),[e,n,o,r,s,i,c,l,a,u,f,d,y])}const Td={actInsideInputWithModifier:!1};var Rd=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=_e(),{deleteElements:o}=pr(),r=bn(e,Td),s=bn(t);x.useEffect(()=>{if(r){const{edges:i,getNodes:c}=n.getState(),l=c().filter(u=>u.selected),a=i.filter(u=>u.selected);o({nodes:l,edges:a}),n.setState({nodesSelectionActive:!1})}},[r]),x.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function $d(e){const t=_e();x.useEffect(()=>{let n;const o=()=>{var s,i;if(!e.current)return;const r=sr(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",mt.error004())),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const mr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Id=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Fn=e=>({x:e.x,y:e.y,zoom:e.k}),Vt=(e,t)=>e.target.closest(`.${t}`),es=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ts=e=>{const t=e.ctrlKey&&eo()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Dd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),zd=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:c=.5,panOnScrollMode:l=Rt.Free,zoomOnDoubleClick:a=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:h,translateExtent:d,minZoom:y,maxZoom:g,zoomActivationKeyCode:w,preventScrolling:m=!0,children:b,noWheelClassName:S,noPanClassName:v})=>{const A=x.useRef(),$=_e(),k=x.useRef(!1),I=x.useRef(!1),D=x.useRef(null),V=x.useRef({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:H,d3ZoomHandler:P,userSelectionActive:p}=he(Dd,Ce),N=bn(w),_=x.useRef(0),T=x.useRef(!1),z=x.useRef();return $d(D),x.useEffect(()=>{if(D.current){const E=D.current.getBoundingClientRect(),C=Ff().scaleExtent([y,g]).translateExtent(d),R=Je(D.current).call(C),B=_t.translate(h.x,h.y).scale(Jt(h.zoom,y,g)),X=[[0,0],[E.width,E.height]],W=C.constrain()(B,X,d);C.transform(R,W),C.wheelDelta(ts),$.setState({d3Zoom:C,d3Selection:R,d3ZoomHandler:R.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:D.current.closest(".react-flow")})}},[]),x.useEffect(()=>{H&&O&&(i&&!N&&!p?H.on("wheel.zoom",E=>{if(Vt(E,S))return!1;E.preventDefault(),E.stopImmediatePropagation();const C=H.property("__zoom").k||1;if(E.ctrlKey&&s){const ne=rt(E),J=ts(E),ee=C*Math.pow(2,J);O.scaleTo(H,ee,ne,E);return}const R=E.deltaMode===1?20:1;let B=l===Rt.Vertical?0:E.deltaX*R,X=l===Rt.Horizontal?0:E.deltaY*R;!eo()&&E.shiftKey&&l!==Rt.Vertical&&(B=E.deltaY*R,X=0),O.translateBy(H,-(B/C)*c,-(X/C)*c,{internal:!0});const W=Fn(H.property("__zoom")),{onViewportChangeStart:U,onViewportChange:Q,onViewportChangeEnd:Z}=$.getState();clearTimeout(z.current),T.current||(T.current=!0,t==null||t(E,W),U==null||U(W)),T.current&&(e==null||e(E,W),Q==null||Q(W),z.current=setTimeout(()=>{n==null||n(E,W),Z==null||Z(W),T.current=!1},150))},{passive:!1}):typeof P<"u"&&H.on("wheel.zoom",function(E,C){if(!m&&E.type==="wheel"&&!E.ctrlKey||Vt(E,S))return null;E.preventDefault(),P.call(this,E,C)},{passive:!1}))},[p,i,l,H,O,P,N,s,m,S,t,e,n]),x.useEffect(()=>{O&&O.on("start",E=>{var B,X;if(!E.sourceEvent||E.sourceEvent.internal)return null;_.current=(B=E.sourceEvent)==null?void 0:B.button;const{onViewportChangeStart:C}=$.getState(),R=Fn(E.transform);k.current=!0,V.current=R,((X=E.sourceEvent)==null?void 0:X.type)==="mousedown"&&$.setState({paneDragging:!0}),C==null||C(R),t==null||t(E.sourceEvent,R)})},[O,t]),x.useEffect(()=>{O&&(p&&!k.current?O.on("zoom",null):p||O.on("zoom",E=>{var R;const{onViewportChange:C}=$.getState();if($.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),I.current=!!(o&&es(f,_.current??0)),(e||C)&&!((R=E.sourceEvent)!=null&&R.internal)){const B=Fn(E.transform);C==null||C(B),e==null||e(E.sourceEvent,B)}}))},[p,O,e,f,o]),x.useEffect(()=>{O&&O.on("end",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=$.getState();if(k.current=!1,$.setState({paneDragging:!1}),o&&es(f,_.current??0)&&!I.current&&o(E.sourceEvent),I.current=!1,(n||C)&&Id(V.current,E.transform)){const R=Fn(E.transform);V.current=R,clearTimeout(A.current),A.current=setTimeout(()=>{C==null||C(R),n==null||n(E.sourceEvent,R)},i?150:0)}})},[O,i,f,n,o]),x.useEffect(()=>{O&&O.filter(E=>{const C=N||r,R=s&&E.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&E.button===1&&E.type==="mousedown"&&(Vt(E,"react-flow__node")||Vt(E,"react-flow__edge")))return!0;if(!f&&!C&&!i&&!a&&!s||p||!a&&E.type==="dblclick"||Vt(E,S)&&E.type==="wheel"||Vt(E,v)&&(E.type!=="wheel"||i&&E.type==="wheel"&&!N)||!s&&E.ctrlKey&&E.type==="wheel"||!C&&!i&&!R&&E.type==="wheel"||!f&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(f)&&!f.includes(E.button)&&E.type==="mousedown")return!1;const B=Array.isArray(f)&&f.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&B})},[p,O,r,s,i,a,f,u,N]),M.createElement("div",{className:"react-flow__renderer",ref:D,style:mr},b)},Pd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Od(){const{userSelectionActive:e,userSelectionRect:t}=he(Pd,Ce);return e&&t?M.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ns(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,s=t.position.y+t.height-o.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),s>0&&(o.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);o.position.x=o.position.x-i,o.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);o.position.y=o.position.y-i,o.style.height+=i,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function zi(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const s=e.filter(c=>c.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const c of s)if(c)switch(c.type){case"select":{i.selected=c.selected;break}case"position":{typeof c.position<"u"&&(i.position=c.position),typeof c.positionAbsolute<"u"&&(i.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(i.dragging=c.dragging),i.expandParent&&ns(o,i);break}case"dimensions":{typeof c.dimensions<"u"&&(i.width=c.dimensions.width,i.height=c.dimensions.height),typeof c.updateStyle<"u"&&(i.style={...i.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(i.resizing=c.resizing),i.expandParent&&ns(o,i);break}case"remove":return o}return o.push(i),o},n)}function Pi(e,t){return zi(e,t)}function Ld(e,t){return zi(e,t)}const vt=(e,t)=>({id:e,type:"select",selected:t});function Wt(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(vt(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(vt(o.id,!1))),n},[])}const ko=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Hd=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Oi=x.memo(({isSelecting:e,selectionMode:t=vn.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:c,onPaneMouseEnter:l,onPaneMouseMove:a,onPaneMouseLeave:u,children:f})=>{const h=x.useRef(null),d=_e(),y=x.useRef(0),g=x.useRef(0),w=x.useRef(),{userSelectionActive:m,elementsSelectable:b,dragging:S}=he(Hd,Ce),v=()=>{d.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,g.current=0},A=P=>{s==null||s(P),d.getState().resetSelectedElements(),d.setState({nodesSelectionActive:!1})},$=P=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){P.preventDefault();return}i==null||i(P)},k=c?P=>c(P):void 0,I=P=>{const{resetSelectedElements:p,domNode:N}=d.getState();if(w.current=N==null?void 0:N.getBoundingClientRect(),!b||!e||P.button!==0||P.target!==h.current||!w.current)return;const{x:_,y:T}=Et(P,w.current);p(),d.setState({userSelectionRect:{width:0,height:0,startX:_,startY:T,x:_,y:T}}),o==null||o(P)},D=P=>{const{userSelectionRect:p,nodeInternals:N,edges:_,transform:T,onNodesChange:z,onEdgesChange:E,nodeOrigin:C,getNodes:R}=d.getState();if(!e||!w.current||!p)return;d.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=Et(P,w.current),X=p.startX??0,W=p.startY??0,U={...p,x:B.x<X?B.x:X,y:B.y<W?B.y:W,width:Math.abs(B.x-X),height:Math.abs(B.y-W)},Q=R(),Z=yi(N,U,T,t===vn.Partial,!0,C),ne=xi(Z,_).map(ee=>ee.id),J=Z.map(ee=>ee.id);if(y.current!==J.length){y.current=J.length;const ee=Wt(Q,J);ee.length&&(z==null||z(ee))}if(g.current!==ne.length){g.current=ne.length;const ee=Wt(_,ne);ee.length&&(E==null||E(ee))}d.setState({userSelectionRect:U})},V=P=>{if(P.button!==0)return;const{userSelectionRect:p}=d.getState();!m&&p&&P.target===h.current&&(A==null||A(P)),d.setState({nodesSelectionActive:y.current>0}),v(),r==null||r(P)},O=P=>{m&&(d.setState({nodesSelectionActive:y.current>0}),r==null||r(P)),v()},H=b&&(e||m);return M.createElement("div",{className:Re(["react-flow__pane",{dragging:S,selection:e}]),onClick:H?void 0:ko(A,h),onContextMenu:ko($,h),onWheel:ko(k,h),onMouseEnter:H?void 0:l,onMouseDown:H?I:void 0,onMouseMove:H?D:a,onMouseUp:H?V:void 0,onMouseLeave:H?O:u,ref:h,style:mr},f,M.createElement(Od,null))});Oi.displayName="Pane";function Li(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:Li(o,t):!1}function os(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Bd(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!Li(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function Vd(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Hi(e,t,n,o,r=[0,0],s){const i=Vd(e,e.extent||o);let c=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const f=n.get(l),{x:h,y:d}=qt(f,r).positionAbsolute;c=f&&Ge(h)&&Ge(d)&&Ge(f.width)&&Ge(f.height)?[[h+e.width*r[0],d+e.height*r[1]],[h+f.width-e.width+e.width*r[0],d+f.height-e.height+e.height*r[1]]]:c}else s==null||s("005",mt.error005()),c=i;else if(e.extent&&l&&e.extent!=="parent"){const f=n.get(l),{x:h,y:d}=qt(f,r).positionAbsolute;c=[[e.extent[0][0]+h,e.extent[0][1]+d],[e.extent[1][0]+h,e.extent[1][1]+d]]}let a={x:0,y:0};if(l){const f=n.get(l);a=qt(f,r).positionAbsolute}const u=c&&c!=="parent"?ir(t,c):t;return{position:{x:u.x-a.x,y:u.y-a.y},positionAbsolute:u}}function Mo({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const rs=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),i=t.getBoundingClientRect(),c={x:i.width*o[0],y:i.height*o[1]};return s.map(l=>{const a=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(a.left-i.left-c.x)/n,y:(a.top-i.top-c.y)/n,...sr(l)}})};function un(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function qo({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:c,onError:l}=t.getState(),a=c.get(e);if(!a){l==null||l("012",mt.error012(e));return}t.setState({nodesSelectionActive:!1}),a.selected?(n||a.selected&&i)&&(s({nodes:[a],edges:[]}),requestAnimationFrame(()=>{var u;return(u=o==null?void 0:o.current)==null?void 0:u.blur()})):r([e])}function Fd(){const e=_e();return x.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:s?r[0]*Math.round(l.x/r[0]):l.x,ySnapped:s?r[1]*Math.round(l.y/r[1]):l.y,...l}},[])}function To(e){return(t,n,o)=>e==null?void 0:e(t,o)}function Bi({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const c=_e(),[l,a]=x.useState(!1),u=x.useRef([]),f=x.useRef({x:null,y:null}),h=x.useRef(0),d=x.useRef(null),y=x.useRef({x:0,y:0}),g=x.useRef(null),w=x.useRef(!1),m=x.useRef(!1),b=Fd();return x.useEffect(()=>{if(e!=null&&e.current){const S=Je(e.current),v=({x:k,y:I})=>{const{nodeInternals:D,onNodeDrag:V,onSelectionDrag:O,updateNodePositions:H,nodeExtent:P,snapGrid:p,snapToGrid:N,nodeOrigin:_,onError:T}=c.getState();f.current={x:k,y:I};let z=!1,E={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&P){const R=mo(u.current,_);E=cr(R)}if(u.current=u.current.map(R=>{const B={x:k-R.distance.x,y:I-R.distance.y};N&&(B.x=p[0]*Math.round(B.x/p[0]),B.y=p[1]*Math.round(B.y/p[1]));const X=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];u.current.length>1&&P&&!R.extent&&(X[0][0]=R.positionAbsolute.x-E.x+P[0][0],X[1][0]=R.positionAbsolute.x+(R.width??0)-E.x2+P[1][0],X[0][1]=R.positionAbsolute.y-E.y+P[0][1],X[1][1]=R.positionAbsolute.y+(R.height??0)-E.y2+P[1][1]);const W=Hi(R,B,D,X,_,T);return z=z||R.position.x!==W.position.x||R.position.y!==W.position.y,R.position=W.position,R.positionAbsolute=W.positionAbsolute,R}),!z)return;H(u.current,!0,!0),a(!0);const C=r?V:To(O);if(C&&g.current){const[R,B]=Mo({nodeId:r,dragItems:u.current,nodeInternals:D});C(g.current,R,B)}},A=()=>{if(!d.current)return;const[k,I]=ci(y.current,d.current);if(k!==0||I!==0){const{transform:D,panBy:V}=c.getState();f.current.x=(f.current.x??0)-k/D[2],f.current.y=(f.current.y??0)-I/D[2],V({x:k,y:I})&&v(f.current)}h.current=requestAnimationFrame(A)},$=k=>{var _;const{nodeInternals:I,multiSelectionActive:D,nodesDraggable:V,unselectNodesAndEdges:O,onNodeDragStart:H,onSelectionDragStart:P}=c.getState();m.current=!0;const p=r?H:To(P);(!i||!s)&&!D&&r&&((_=I.get(r))!=null&&_.selected||O()),r&&s&&i&&qo({id:r,store:c,nodeRef:e});const N=b(k);if(f.current=N,u.current=Bd(I,V,N,r),p&&u.current){const[T,z]=Mo({nodeId:r,dragItems:u.current,nodeInternals:I});p(k.sourceEvent,T,z)}};if(t)S.on(".drag",null);else{const k=Ka().on("start",I=>{const{domNode:D,nodeDragThreshold:V}=c.getState();V===0&&$(I);const O=b(I);f.current=O,d.current=(D==null?void 0:D.getBoundingClientRect())||null,y.current=Et(I.sourceEvent,d.current)}).on("drag",I=>{var H,P;const D=b(I),{autoPanOnNodeDrag:V,nodeDragThreshold:O}=c.getState();if(!w.current&&m.current&&V&&(w.current=!0,A()),!m.current){const p=D.xSnapped-(((H=f==null?void 0:f.current)==null?void 0:H.x)??0),N=D.ySnapped-(((P=f==null?void 0:f.current)==null?void 0:P.y)??0);Math.sqrt(p*p+N*N)>O&&$(I)}(f.current.x!==D.xSnapped||f.current.y!==D.ySnapped)&&u.current&&m.current&&(g.current=I.sourceEvent,y.current=Et(I.sourceEvent,d.current),v(D))}).on("end",I=>{if(m.current&&(a(!1),w.current=!1,m.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:D,nodeInternals:V,onNodeDragStop:O,onSelectionDragStop:H}=c.getState(),P=r?O:To(H);if(D(u.current,!1,!1),P){const[p,N]=Mo({nodeId:r,dragItems:u.current,nodeInternals:V});P(I.sourceEvent,p,N)}}}).filter(I=>{const D=I.target;return!I.button&&(!n||!os(D,`.${n}`,e))&&(!o||os(D,o,e))});return S.call(k),()=>{S.on(".drag",null)}}}},[e,t,n,o,s,c,r,i,b]),l}function Vi(){const e=_e();return x.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:c,snapGrid:l,onError:a,nodesDraggable:u}=e.getState(),f=i().filter(b=>b.selected&&(b.draggable||u&&typeof b.draggable>"u")),h=c?l[0]:5,d=c?l[1]:5,y=n.isShiftPressed?4:1,g=n.x*h*y,w=n.y*d*y,m=f.map(b=>{if(b.positionAbsolute){const S={x:b.positionAbsolute.x+g,y:b.positionAbsolute.y+w};c&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:v,position:A}=Hi(b,S,o,r,void 0,a);b.position=A,b.positionAbsolute=v}return b});s(m,!0,!1)},[])}const Zt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var fn=e=>{const t=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:c,yPosOrigin:l,selected:a,onClick:u,onMouseEnter:f,onMouseMove:h,onMouseLeave:d,onContextMenu:y,onDoubleClick:g,style:w,className:m,isDraggable:b,isSelectable:S,isConnectable:v,isFocusable:A,selectNodesOnDrag:$,sourcePosition:k,targetPosition:I,hidden:D,resizeObserver:V,dragHandle:O,zIndex:H,isParent:P,noDragClassName:p,noPanClassName:N,initialized:_,disableKeyboardA11y:T,ariaLabel:z,rfId:E,hasHandleBounds:C})=>{const R=_e(),B=x.useRef(null),X=x.useRef(null),W=x.useRef(k),U=x.useRef(I),Q=x.useRef(o),Z=S||b||u||f||h||d,ne=Vi(),J=un(n,R.getState,f),ee=un(n,R.getState,h),le=un(n,R.getState,d),pe=un(n,R.getState,y),Ee=un(n,R.getState,g),ae=se=>{const{nodeDragThreshold:F}=R.getState();if(S&&(!$||!b||F>0)&&qo({id:n,store:R,nodeRef:B}),u){const we=R.getState().nodeInternals.get(n);we&&u(se,{...we})}},oe=se=>{if(!Fo(se)&&!T)if(ai.includes(se.key)&&S){const F=se.key==="Escape";qo({id:n,store:R,unselect:F,nodeRef:B})}else b&&a&&Object.prototype.hasOwnProperty.call(Zt,se.key)&&(R.setState({ariaLiveMessage:`Moved selected node ${se.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ne({x:Zt[se.key].x,y:Zt[se.key].y,isShiftPressed:se.shiftKey}))};x.useEffect(()=>()=>{X.current&&(V==null||V.unobserve(X.current),X.current=null)},[]),x.useEffect(()=>{if(B.current&&!D){const se=B.current;(!_||!C||X.current!==se)&&(X.current&&(V==null||V.unobserve(X.current)),V==null||V.observe(se),X.current=se)}},[D,_,C]),x.useEffect(()=>{const se=Q.current!==o,F=W.current!==k,we=U.current!==I;B.current&&(se||F||we)&&(se&&(Q.current=o),F&&(W.current=k),we&&(U.current=I),R.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,o,k,I]);const ye=Bi({nodeRef:B,disabled:D||!b,noDragClassName:p,handleSelector:O,nodeId:n,isSelectable:S,selectNodesOnDrag:$});return D?null:M.createElement("div",{className:Re(["react-flow__node",`react-flow__node-${o}`,{[N]:b},m,{selected:a,selectable:S,parent:P,dragging:ye}]),ref:B,style:{zIndex:H,transform:`translate(${c}px,${l}px)`,pointerEvents:Z?"all":"none",visibility:_?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:J,onMouseMove:ee,onMouseLeave:le,onContextMenu:pe,onClick:ae,onDoubleClick:Ee,onKeyDown:A?oe:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":T?void 0:`${Ti}-${E}`,"aria-label":z},M.createElement(od,{value:n},M.createElement(e,{id:n,data:r,type:o,xPos:s,yPos:i,selected:a,isConnectable:v,sourcePosition:k,targetPosition:I,dragging:ye,dragHandle:O,zIndex:H})))};return t.displayName="NodeWrapper",x.memo(t)};const jd=e=>{const t=e.getNodes().filter(n=>n.selected);return{...mo(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Wd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=_e(),{width:r,height:s,x:i,y:c,transformString:l,userSelectionActive:a}=he(jd,Ce),u=Vi(),f=x.useRef(null);if(x.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),Bi({nodeRef:f}),a||!r||!s)return null;const h=e?y=>{const g=o.getState().getNodes().filter(w=>w.selected);e(y,g)}:void 0,d=y=>{Object.prototype.hasOwnProperty.call(Zt,y.key)&&u({x:Zt[y.key].x,y:Zt[y.key].y,isShiftPressed:y.shiftKey})};return M.createElement("div",{className:Re(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},M.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:r,height:s,top:c,left:i}}))}var Xd=x.memo(Wd);const Yd=e=>e.nodesSelectionActive,Fi=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:c,onMove:l,onMoveStart:a,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:h,selectionMode:d,onSelectionStart:y,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:m,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:v,zoomOnPinch:A,panOnScroll:$,panOnScrollSpeed:k,panOnScrollMode:I,zoomOnDoubleClick:D,panOnDrag:V,defaultViewport:O,translateExtent:H,minZoom:P,maxZoom:p,preventScrolling:N,onSelectionContextMenu:_,noWheelClassName:T,noPanClassName:z,disableKeyboardA11y:E})=>{const C=he(Yd),R=bn(f),B=bn(m),X=B||V,W=B||$,U=R||h&&X!==!0;return Rd({deleteKeyCode:c,multiSelectionKeyCode:w}),M.createElement(zd,{onMove:l,onMoveStart:a,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:v,zoomOnPinch:A,panOnScroll:W,panOnScrollSpeed:k,panOnScrollMode:I,zoomOnDoubleClick:D,panOnDrag:!R&&X,defaultViewport:O,translateExtent:H,minZoom:P,maxZoom:p,zoomActivationKeyCode:b,preventScrolling:N,noWheelClassName:T,noPanClassName:z},M.createElement(Oi,{onSelectionStart:y,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:X,isSelecting:!!U,selectionMode:d},e,C&&M.createElement(Xd,{onSelectionContextMenu:_,noPanClassName:z,disableKeyboardA11y:E})))};Fi.displayName="FlowRenderer";var qd=x.memo(Fi);function Zd(e){return he(x.useCallback(n=>e?yi(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Gd(e){const t={input:fn(e.input||Ai),default:fn(e.default||Yo),output:fn(e.output||ki),group:fn(e.group||hr)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=fn(e[s]||Yo),r),n);return{...t,...o}}const Ud=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},Kd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ji=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=he(Kd,Ce),c=Zd(e.onlyRenderVisibleElements),l=x.useRef(),a=x.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const h=f.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));s(h)});return l.current=u,u},[]);return x.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),M.createElement("div",{className:"react-flow__nodes",style:mr},c.map(u=>{var A,$,k;let f=u.type||"default";e.nodeTypes[f]||(i==null||i("003",mt.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,d=!!(u.draggable||t&&typeof u.draggable>"u"),y=!!(u.selectable||r&&typeof u.selectable>"u"),g=!!(u.connectable||n&&typeof u.connectable>"u"),w=!!(u.focusable||o&&typeof u.focusable>"u"),m=e.nodeExtent?ir(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,b=(m==null?void 0:m.x)??0,S=(m==null?void 0:m.y)??0,v=Ud({x:b,y:S,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return M.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||Y.Bottom,targetPosition:u.targetPosition||Y.Top,hidden:u.hidden,xPos:b,yPos:S,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:d,isSelectable:y,isConnectable:g,isFocusable:w,resizeObserver:a,dragHandle:u.dragHandle,zIndex:((A=u[de])==null?void 0:A.z)??0,isParent:!!(($=u[de])!=null&&$.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((k=u[de])!=null&&k.handleBounds)})}))};ji.displayName="NodeRenderer";var Qd=x.memo(ji);const Jd=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,eh=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,ss="react-flow__edgeupdater",is=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:c})=>M.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:Re([ss,`${ss}-${c}`]),cx:Jd(t,o,e),cy:eh(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),th=()=>!0;var Ft=e=>{const t=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:c,selected:l,animated:a,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:d,labelBgPadding:y,labelBgBorderRadius:g,style:w,source:m,target:b,sourceX:S,sourceY:v,targetX:A,targetY:$,sourcePosition:k,targetPosition:I,elementsSelectable:D,hidden:V,sourceHandleId:O,targetHandleId:H,onContextMenu:P,onMouseEnter:p,onMouseMove:N,onMouseLeave:_,edgeUpdaterRadius:T,onEdgeUpdate:z,onEdgeUpdateStart:E,onEdgeUpdateEnd:C,markerEnd:R,markerStart:B,rfId:X,ariaLabel:W,isFocusable:U,isUpdatable:Q,pathOptions:Z,interactionWidth:ne,disableKeyboardA11y:J})=>{const ee=x.useRef(null),[le,pe]=x.useState(!1),[Ee,ae]=x.useState(!1),oe=_e(),ye=x.useMemo(()=>`url('#${Wo(B,X)}')`,[B,X]),se=x.useMemo(()=>`url('#${Wo(R,X)}')`,[R,X]);if(V)return null;const F=ge=>{var Ae;const{edges:me,addSelectedEdges:ce,unselectNodesAndEdges:We,multiSelectionActive:Le}=oe.getState(),Ne=me.find(Xe=>Xe.id===n);Ne&&(D&&(oe.setState({nodesSelectionActive:!1}),Ne.selected&&Le?(We({nodes:[],edges:[Ne]}),(Ae=ee.current)==null||Ae.blur()):ce([n])),i&&i(ge,Ne))},we=an(n,oe.getState,c),ze=an(n,oe.getState,P),Ue=an(n,oe.getState,p),Ve=an(n,oe.getState,N),Ke=an(n,oe.getState,_),Se=(ge,me)=>{if(ge.button!==0)return;const{edges:ce,isValidConnection:We}=oe.getState(),Le=me?b:m,Ne=(me?H:O)||null,Ae=me?"target":"source",Xe=We||th,ot=me,Ye=ce.find(ue=>ue.id===n);ae(!0),E==null||E(ge,Ye,Ae);const at=ue=>{ae(!1),C==null||C(ue,Ye,Ae)};_i({event:ge,handleId:Ne,nodeId:Le,onConnect:ue=>z==null?void 0:z(Ye,ue),isTarget:ot,getState:oe.getState,setState:oe.setState,isValidConnection:Xe,edgeUpdaterType:Ae,onEdgeUpdateEnd:at})},ke=ge=>Se(ge,!0),Pe=ge=>Se(ge,!1),Me=()=>pe(!0),Oe=()=>pe(!1),Fe=!D&&!i,je=ge=>{var me;if(!J&&ai.includes(ge.key)&&D){const{unselectNodesAndEdges:ce,addSelectedEdges:We,edges:Le}=oe.getState();ge.key==="Escape"?((me=ee.current)==null||me.blur(),ce({edges:[Le.find(Ae=>Ae.id===n)]})):We([n])}};return M.createElement("g",{className:Re(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:l,animated:a,inactive:Fe,updating:le}]),onClick:F,onDoubleClick:we,onContextMenu:ze,onMouseEnter:Ue,onMouseMove:Ve,onMouseLeave:Ke,onKeyDown:U?je:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${m} to ${b}`,"aria-describedby":U?`${Ri}-${X}`:void 0,ref:ee},!Ee&&M.createElement(e,{id:n,source:m,target:b,selected:l,animated:a,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:d,labelBgPadding:y,labelBgBorderRadius:g,data:s,style:w,sourceX:S,sourceY:v,targetX:A,targetY:$,sourcePosition:k,targetPosition:I,sourceHandleId:O,targetHandleId:H,markerStart:ye,markerEnd:se,pathOptions:Z,interactionWidth:ne}),Q&&M.createElement(M.Fragment,null,(Q==="source"||Q===!0)&&M.createElement(is,{position:k,centerX:S,centerY:v,radius:T,onMouseDown:ke,onMouseEnter:Me,onMouseOut:Oe,type:"source"}),(Q==="target"||Q===!0)&&M.createElement(is,{position:I,centerX:A,centerY:$,radius:T,onMouseDown:Pe,onMouseEnter:Me,onMouseOut:Oe,type:"target"})))};return t.displayName="EdgeWrapper",x.memo(t)};function nh(e){const t={default:Ft(e.default||no),straight:Ft(e.bezier||ur),step:Ft(e.step||ar),smoothstep:Ft(e.step||po),simplebezier:Ft(e.simplebezier||lr)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=Ft(e[s]||no),r),n);return{...t,...o}}function cs(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:o+s/2,y:r};case Y.Right:return{x:o+s,y:r+i/2};case Y.Bottom:return{x:o+s/2,y:r+i};case Y.Left:return{x:o,y:r+i/2}}}function ls(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const oh=(e,t,n,o,r,s)=>{const i=cs(n,e,t),c=cs(s,o,r);return{sourceX:i.x,sourceY:i.y,targetX:c.x,targetY:c.y}};function rh({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:c,transform:l}){const a={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+s)};a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const u=cr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:c/l[2]}),f=Math.max(0,Math.min(u.x2,a.x2)-Math.max(u.x,a.x)),h=Math.max(0,Math.min(u.y2,a.y2)-Math.max(u.y,a.y));return Math.ceil(f*h)>0}function as(e){var o,r,s,i,c;const t=((o=e==null?void 0:e[de])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const sh=[{level:0,isMaxLevel:!0,edges:[]}];function ih(e,t,n=!1){let o=-1;const r=e.reduce((i,c)=>{var u,f;const l=Ge(c.zIndex);let a=l?c.zIndex:0;if(n){const h=t.get(c.target),d=t.get(c.source),y=c.selected||(h==null?void 0:h.selected)||(d==null?void 0:d.selected),g=Math.max(((u=d==null?void 0:d[de])==null?void 0:u.z)||0,((f=h==null?void 0:h[de])==null?void 0:f.z)||0,1e3);a=(l?c.zIndex:0)+(y?g:0)}return i[a]?i[a].push(c):i[a]=[c],o=a>o?a:o,i},{}),s=Object.entries(r).map(([i,c])=>{const l=+i;return{edges:c,level:l,isMaxLevel:l===o}});return s.length===0?sh:s}function ch(e,t,n){const o=he(x.useCallback(r=>e?r.edges.filter(s=>{const i=t.get(s.source),c=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&rh({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:c.width,targetHeight:c.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return ih(o,t,n)}const lh=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ah=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),us={[to.Arrow]:lh,[to.ArrowClosed]:ah};function uh(e){const t=_e();return x.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(us,e)?us[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",mt.error009(e)),null)},[e])}const fh=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:c="auto-start-reverse"})=>{const l=uh(t);return l?M.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0"},M.createElement(l,{color:n,strokeWidth:i})):null},dh=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const c=Wo(i,t);o.includes(c)||(r.push({id:c,color:i.color||e,...i}),o.push(c))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},Wi=({defaultColor:e,rfId:t})=>{const n=he(x.useCallback(dh({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return M.createElement("defs",null,n.map(o=>M.createElement(fh,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Wi.displayName="MarkerDefinitions";var hh=x.memo(Wi);const ph=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Xi=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeUpdate:i,onEdgeContextMenu:c,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:f,edgeUpdaterRadius:h,onEdgeDoubleClick:d,onEdgeUpdateStart:y,onEdgeUpdateEnd:g,children:w,disableKeyboardA11y:m})=>{const{edgesFocusable:b,edgesUpdatable:S,elementsSelectable:v,width:A,height:$,connectionMode:k,nodeInternals:I,onError:D}=he(ph,Ce),V=ch(t,I,n);return A?M.createElement(M.Fragment,null,V.map(({level:O,edges:H,isMaxLevel:P})=>M.createElement("svg",{key:O,style:{zIndex:O},width:A,height:$,className:"react-flow__edges react-flow__container"},P&&M.createElement(hh,{defaultColor:e,rfId:o}),M.createElement("g",null,H.map(p=>{const[N,_,T]=as(I.get(p.source)),[z,E,C]=as(I.get(p.target));if(!T||!C)return null;let R=p.type||"default";r[R]||(D==null||D("011",mt.error011(R)),R="default");const B=r[R]||r.default,X=k===zt.Strict?E.target:(E.target??[]).concat(E.source??[]),W=ls(_.source,p.sourceHandle),U=ls(X,p.targetHandle),Q=(W==null?void 0:W.position)||Y.Bottom,Z=(U==null?void 0:U.position)||Y.Top,ne=!!(p.focusable||b&&typeof p.focusable>"u"),J=typeof i<"u"&&(p.updatable||S&&typeof p.updatable>"u");if(!W||!U)return D==null||D("008",mt.error008(W,p)),null;const{sourceX:ee,sourceY:le,targetX:pe,targetY:Ee}=oh(N,W,Q,z,U,Z);return M.createElement(B,{key:p.id,id:p.id,className:Re([p.className,s]),type:R,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:ee,sourceY:le,targetX:pe,targetY:Ee,sourcePosition:Q,targetPosition:Z,elementsSelectable:v,onEdgeUpdate:i,onContextMenu:c,onMouseEnter:l,onMouseMove:a,onMouseLeave:u,onClick:f,edgeUpdaterRadius:h,onEdgeDoubleClick:d,onEdgeUpdateStart:y,onEdgeUpdateEnd:g,rfId:o,ariaLabel:p.ariaLabel,isFocusable:ne,isUpdatable:J,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth,disableKeyboardA11y:m})})))),w):null};Xi.displayName="EdgeRenderer";var mh=x.memo(Xi);const gh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yh({children:e}){const t=he(gh);return M.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function xh(e){const t=pr(),n=x.useRef(!1);x.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const wh={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Yi=({nodeId:e,handleType:t,style:n,type:o=bt.Bezier,CustomComponent:r,connectionStatus:s})=>{var $,k,I;const{fromNode:i,handleId:c,toX:l,toY:a,connectionMode:u}=he(x.useCallback(D=>({fromNode:D.nodeInternals.get(e),handleId:D.connectionHandleId,toX:(D.connectionPosition.x-D.transform[0])/D.transform[2],toY:(D.connectionPosition.y-D.transform[1])/D.transform[2],connectionMode:D.connectionMode}),[e]),Ce),f=($=i==null?void 0:i[de])==null?void 0:$.handleBounds;let h=f==null?void 0:f[t];if(u===zt.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const d=c?h.find(D=>D.id===c):h[0],y=d?d.x+d.width/2:(i.width??0)/2,g=d?d.y+d.height/2:i.height??0,w=(((k=i.positionAbsolute)==null?void 0:k.x)??0)+y,m=(((I=i.positionAbsolute)==null?void 0:I.y)??0)+g,b=d==null?void 0:d.position,S=b?wh[b]:null;if(!b||!S)return null;if(r)return M.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:d,fromX:w,fromY:m,toX:l,toY:a,fromPosition:b,toPosition:S,connectionStatus:s});let v="";const A={sourceX:w,sourceY:m,sourcePosition:b,targetX:l,targetY:a,targetPosition:S};return o===bt.Bezier?[v]=pi(A):o===bt.Step?[v]=jo({...A,borderRadius:0}):o===bt.SmoothStep?[v]=jo(A):o===bt.SimpleBezier?[v]=hi(A):v=`M${w},${m} ${l},${a}`,M.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Yi.displayName="ConnectionLine";const vh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function bh({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:c,height:l,connectionStatus:a}=he(vh,Ce);return!(r&&s&&c&&i)?null:M.createElement("svg",{style:e,width:c,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},M.createElement("g",{className:Re(["react-flow__connection",a])},M.createElement(Yi,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:o,connectionStatus:a})))}function fs(e,t){return x.useRef(null),_e(),x.useMemo(()=>t(e),[e])}const qi=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:c,onNodeDoubleClick:l,onEdgeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:d,onSelectionContextMenu:y,onSelectionStart:g,onSelectionEnd:w,connectionLineType:m,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:v,selectionKeyCode:A,selectionOnDrag:$,selectionMode:k,multiSelectionKeyCode:I,panActivationKeyCode:D,zoomActivationKeyCode:V,deleteKeyCode:O,onlyRenderVisibleElements:H,elementsSelectable:P,selectNodesOnDrag:p,defaultViewport:N,translateExtent:_,minZoom:T,maxZoom:z,preventScrolling:E,defaultMarkerColor:C,zoomOnScroll:R,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:W,panOnScrollMode:U,zoomOnDoubleClick:Q,panOnDrag:Z,onPaneClick:ne,onPaneMouseEnter:J,onPaneMouseMove:ee,onPaneMouseLeave:le,onPaneScroll:pe,onPaneContextMenu:Ee,onEdgeUpdate:ae,onEdgeContextMenu:oe,onEdgeMouseEnter:ye,onEdgeMouseMove:se,onEdgeMouseLeave:F,edgeUpdaterRadius:we,onEdgeUpdateStart:ze,onEdgeUpdateEnd:Ue,noDragClassName:Ve,noWheelClassName:Ke,noPanClassName:Se,elevateEdgesOnSelect:ke,disableKeyboardA11y:Pe,nodeOrigin:Me,nodeExtent:Oe,rfId:Fe})=>{const je=fs(e,Gd),ge=fs(t,nh);return xh(s),M.createElement(qd,{onPaneClick:ne,onPaneMouseEnter:J,onPaneMouseMove:ee,onPaneMouseLeave:le,onPaneContextMenu:Ee,onPaneScroll:pe,deleteKeyCode:O,selectionKeyCode:A,selectionOnDrag:$,selectionMode:k,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:I,panActivationKeyCode:D,zoomActivationKeyCode:V,elementsSelectable:P,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:R,zoomOnPinch:B,zoomOnDoubleClick:Q,panOnScroll:X,panOnScrollSpeed:W,panOnScrollMode:U,panOnDrag:Z,defaultViewport:N,translateExtent:_,minZoom:T,maxZoom:z,onSelectionContextMenu:y,preventScrolling:E,noDragClassName:Ve,noWheelClassName:Ke,noPanClassName:Se,disableKeyboardA11y:Pe},M.createElement(yh,null,M.createElement(mh,{edgeTypes:ge,onEdgeClick:c,onEdgeDoubleClick:a,onEdgeUpdate:ae,onlyRenderVisibleElements:H,onEdgeContextMenu:oe,onEdgeMouseEnter:ye,onEdgeMouseMove:se,onEdgeMouseLeave:F,onEdgeUpdateStart:ze,onEdgeUpdateEnd:Ue,edgeUpdaterRadius:we,defaultMarkerColor:C,noPanClassName:Se,elevateEdgesOnSelect:!!ke,disableKeyboardA11y:Pe,rfId:Fe},M.createElement(bh,{style:b,type:m,component:S,containerStyle:v})),M.createElement("div",{className:"react-flow__edgelabel-renderer"}),M.createElement(Qd,{nodeTypes:je,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:d,selectNodesOnDrag:p,onlyRenderVisibleElements:H,noPanClassName:Se,noDragClassName:Ve,disableKeyboardA11y:Pe,nodeOrigin:Me,nodeExtent:Oe,rfId:Fe})))};qi.displayName="GraphView";var _h=x.memo(qi);const Zo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],xt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Zo,nodeExtent:Zo,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Kf,isValidConnection:void 0},Eh=()=>al((e,t)=>({...xt,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:Co(n,o,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",s=typeof o<"u",i=r?Co(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:c,domNode:l,nodeOrigin:a}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(f.transform),d=n.reduce((g,w)=>{const m=r.get(w.id);if(m!=null&&m.hidden)r.set(m.id,{...m,[de]:{...m[de],handleBounds:void 0}});else if(m){const b=sr(w.nodeElement);!!(b.width&&b.height&&(m.width!==b.width||m.height!==b.height||w.forceUpdate))&&(r.set(m.id,{...m,[de]:{...m[de],handleBounds:{source:rs(".source",w.nodeElement,h,a),target:rs(".target",w.nodeElement,h,a)}},...b}),g.push({id:m.id,type:"dimensions",dimensions:b}))}return g},[]);Ii(r,a);const y=i||s&&!i&&Di(t,{initial:!0,...c});e({nodeInternals:new Map(r),fitViewOnInitDone:y}),(d==null?void 0:d.length)>0&&(o==null||o(d))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(c=>{const l={id:c.id,type:"position",dragging:r};return o&&(l.positionAbsolute=c.positionAbsolute,l.position=c.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:c,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(s){const a=Pi(n,c()),u=Co(a,r,i,l);e({nodeInternals:u})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,c=null;o?i=n.map(l=>vt(l,!0)):(i=Wt(s(),n),c=Wt(r,[])),Vn({changedNodes:i,changedEdges:c,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,c=null;o?i=n.map(l=>vt(l,!0)):(i=Wt(r,n),c=Wt(s(),[])),Vn({changedNodes:c,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=t(),i=n||s(),c=o||r,l=i.map(u=>(u.selected=!1,vt(u.id,!1))),a=c.map(u=>vt(u.id,!1));Vn({changedNodes:l,changedEdges:a,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o==null||o.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o==null||o.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),s=o().filter(c=>c.selected).map(c=>vt(c.id,!1)),i=n.filter(c=>c.selected).map(c=>vt(c.id,!1));Vn({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=ir(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:c,translateExtent:l}=t();if(!i||!c||!n.x&&!n.y)return!1;const a=_t.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),u=[[0,0],[r,s]],f=i==null?void 0:i.constrain()(a,u,l);return i.transform(c,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>e({connectionNodeId:xt.connectionNodeId,connectionHandleId:xt.connectionHandleId,connectionHandleType:xt.connectionHandleType,connectionStatus:xt.connectionStatus,connectionStartHandle:xt.connectionStartHandle,connectionEndHandle:xt.connectionEndHandle}),reset:()=>e({...xt})}),Object.is),Zi=({children:e})=>{const t=x.useRef(null);return t.current||(t.current=Eh()),M.createElement(jf,{value:t.current},e)};Zi.displayName="ReactFlowProvider";const Gi=({children:e})=>x.useContext(ho)?M.createElement(M.Fragment,null,e):M.createElement(Zi,null,e);Gi.displayName="ReactFlowWrapper";const Sh={input:Ai,default:Yo,output:ki,group:hr},Nh={default:no,straight:ur,step:ar,smoothstep:po,simplebezier:lr},Ah=[0,0],Ch=[15,15],kh={x:0,y:0,zoom:1},Mh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ui=x.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=Sh,edgeTypes:i=Nh,onNodeClick:c,onEdgeClick:l,onInit:a,onMove:u,onMoveStart:f,onMoveEnd:h,onConnect:d,onConnectStart:y,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:m,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:v,onNodeContextMenu:A,onNodeDoubleClick:$,onNodeDragStart:k,onNodeDrag:I,onNodeDragStop:D,onNodesDelete:V,onEdgesDelete:O,onSelectionChange:H,onSelectionDragStart:P,onSelectionDrag:p,onSelectionDragStop:N,onSelectionContextMenu:_,onSelectionStart:T,onSelectionEnd:z,connectionMode:E=zt.Strict,connectionLineType:C=bt.Bezier,connectionLineStyle:R,connectionLineComponent:B,connectionLineContainerStyle:X,deleteKeyCode:W="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:Q=!1,selectionMode:Z=vn.Full,panActivationKeyCode:ne="Space",multiSelectionKeyCode:J=eo()?"Meta":"Control",zoomActivationKeyCode:ee=eo()?"Meta":"Control",snapToGrid:le=!1,snapGrid:pe=Ch,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:ae=!0,nodesDraggable:oe,nodesConnectable:ye,nodesFocusable:se,nodeOrigin:F=Ah,edgesFocusable:we,edgesUpdatable:ze,elementsSelectable:Ue,defaultViewport:Ve=kh,minZoom:Ke=.5,maxZoom:Se=2,translateExtent:ke=Zo,preventScrolling:Pe=!0,nodeExtent:Me,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:Fe=!0,zoomOnPinch:je=!0,panOnScroll:ge=!1,panOnScrollSpeed:me=.5,panOnScrollMode:ce=Rt.Free,zoomOnDoubleClick:We=!0,panOnDrag:Le=!0,onPaneClick:Ne,onPaneMouseEnter:Ae,onPaneMouseMove:Xe,onPaneMouseLeave:ot,onPaneScroll:Ye,onPaneContextMenu:at,children:At,onEdgeUpdate:ue,onEdgeContextMenu:$e,onEdgeDoubleClick:q,onEdgeMouseEnter:re,onEdgeMouseMove:Te,onEdgeMouseLeave:ut,onEdgeUpdateStart:j,onEdgeUpdateEnd:G,edgeUpdaterRadius:K=10,onNodesChange:xe,onEdgesChange:ve,noDragClassName:qe="nodrag",noWheelClassName:Ze="nowheel",noPanClassName:be="nopan",fitView:Ie=!1,fitViewOptions:fe,connectOnClick:Ct=!0,attributionPosition:xo,proOptions:Mn,defaultEdgeOptions:Tn,elevateNodesOnSelect:Rn=!0,elevateEdgesOnSelect:$n=!1,disableKeyboardA11y:ie=!1,autoPanOnConnect:Qe=!0,autoPanOnNodeDrag:rn=!0,connectionRadius:kt=20,isValidConnection:wo,onError:sn,style:fc,id:_r,nodeDragThreshold:dc,...hc},pc)=>{const vo=_r||"1";return M.createElement("div",{...hc,style:{...fc,...Mh},ref:pc,className:Re(["react-flow",r]),"data-testid":"rf__wrapper",id:_r},M.createElement(Gi,null,M.createElement(_h,{onInit:a,onMove:u,onMoveStart:f,onMoveEnd:h,onNodeClick:c,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:v,onNodeContextMenu:A,onNodeDoubleClick:$,nodeTypes:s,edgeTypes:i,connectionLineType:C,connectionLineStyle:R,connectionLineComponent:B,connectionLineContainerStyle:X,selectionKeyCode:U,selectionOnDrag:Q,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:J,panActivationKeyCode:ne,zoomActivationKeyCode:ee,onlyRenderVisibleElements:Ee,selectNodesOnDrag:ae,defaultViewport:Ve,translateExtent:ke,minZoom:Ke,maxZoom:Se,preventScrolling:Pe,zoomOnScroll:Fe,zoomOnPinch:je,zoomOnDoubleClick:We,panOnScroll:ge,panOnScrollSpeed:me,panOnScrollMode:ce,panOnDrag:Le,onPaneClick:Ne,onPaneMouseEnter:Ae,onPaneMouseMove:Xe,onPaneMouseLeave:ot,onPaneScroll:Ye,onPaneContextMenu:at,onSelectionContextMenu:_,onSelectionStart:T,onSelectionEnd:z,onEdgeUpdate:ue,onEdgeContextMenu:$e,onEdgeDoubleClick:q,onEdgeMouseEnter:re,onEdgeMouseMove:Te,onEdgeMouseLeave:ut,onEdgeUpdateStart:j,onEdgeUpdateEnd:G,edgeUpdaterRadius:K,defaultMarkerColor:Oe,noDragClassName:qe,noWheelClassName:Ze,noPanClassName:be,elevateEdgesOnSelect:$n,rfId:vo,disableKeyboardA11y:ie,nodeOrigin:F,nodeExtent:Me}),M.createElement(wd,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:d,onConnectStart:y,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:m,nodesDraggable:oe,nodesConnectable:ye,nodesFocusable:se,edgesFocusable:we,edgesUpdatable:ze,elementsSelectable:Ue,elevateNodesOnSelect:Rn,minZoom:Ke,maxZoom:Se,nodeExtent:Me,onNodesChange:xe,onEdgesChange:ve,snapToGrid:le,snapGrid:pe,connectionMode:E,translateExtent:ke,connectOnClick:Ct,defaultEdgeOptions:Tn,fitView:Ie,fitViewOptions:fe,onNodesDelete:V,onEdgesDelete:O,onNodeDragStart:k,onNodeDrag:I,onNodeDragStop:D,onSelectionDrag:p,onSelectionDragStart:P,onSelectionDragStop:N,noPanClassName:be,nodeOrigin:F,rfId:vo,autoPanOnConnect:Qe,autoPanOnNodeDrag:rn,onError:sn,connectionRadius:kt,isValidConnection:wo,nodeDragThreshold:dc}),M.createElement(yd,{onSelectionChange:H}),At,M.createElement(Xf,{proOptions:Mn,position:xo}),M.createElement(Sd,{rfId:vo,disableKeyboardA11y:ie})))});Ui.displayName="ReactFlow";function Ki(e){return t=>{const[n,o]=x.useState(t),r=x.useCallback(s=>o(i=>e(s,i)),[]);return[n,o,r]}}const Th=Ki(Pi),Rh=Ki(Ld);function $h(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},M.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ih(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},M.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Dh(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},M.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function zh(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ph(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const pn=({children:e,className:t,...n})=>M.createElement("button",{type:"button",className:Re(["react-flow__controls-button",t]),...n},e);pn.displayName="ControlButton";const Oh=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Qi=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:c,onInteractiveChange:l,className:a,children:u,position:f="bottom-left"})=>{const h=_e(),[d,y]=x.useState(!1),{isInteractive:g,minZoomReached:w,maxZoomReached:m}=he(Oh,Ce),{zoomIn:b,zoomOut:S,fitView:v}=pr();if(x.useEffect(()=>{y(!0)},[]),!d)return null;const A=()=>{b(),s==null||s()},$=()=>{S(),i==null||i()},k=()=>{v(r),c==null||c()},I=()=>{h.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)};return M.createElement(ii,{className:Re(["react-flow__controls",a]),position:f,style:e,"data-testid":"rf__controls"},t&&M.createElement(M.Fragment,null,M.createElement(pn,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},M.createElement($h,null)),M.createElement(pn,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},M.createElement(Ih,null))),n&&M.createElement(pn,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},M.createElement(Dh,null)),o&&M.createElement(pn,{className:"react-flow__controls-interactive",onClick:I,title:"toggle interactivity","aria-label":"toggle interactivity"},g?M.createElement(Ph,null):M.createElement(zh,null)),u)};Qi.displayName="Controls";var Lh=x.memo(Qi);const Hh=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__renderer")};function Bh({children:e}){const t=he(Hh);return t?mc.createPortal(e,t):null}const Vh=(e,t)=>{var n,o,r,s,i,c;return((n=e==null?void 0:e.positionAbsolute)==null?void 0:n.x)===((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)&&((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.y)===((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)&&(e==null?void 0:e.width)===(t==null?void 0:t.width)&&(e==null?void 0:e.height)===(t==null?void 0:t.height)&&(e==null?void 0:e.selected)===(t==null?void 0:t.selected)&&((i=e==null?void 0:e[de])==null?void 0:i.z)===((c=t==null?void 0:t[de])==null?void 0:c.z)},Fh=(e,t)=>e.length===t.length&&e.every((n,o)=>Vh(n,t[o])),jh=e=>({transform:e.transform,nodeOrigin:e.nodeOrigin,selectedNodesCount:e.getNodes().filter(t=>t.selected).length});function Wh(e,t,n,o,r){let s=.5;r==="start"?s=0:r==="end"&&(s=1);let i=[(e.x+e.width*s)*t[2]+t[0],e.y*t[2]+t[1]-o],c=[-100*s,-100];switch(n){case Y.Right:i=[(e.x+e.width)*t[2]+t[0]+o,(e.y+e.height*s)*t[2]+t[1]],c=[0,-100*s];break;case Y.Bottom:i[1]=(e.y+e.height)*t[2]+t[1]+o,c[1]=0;break;case Y.Left:i=[e.x*t[2]+t[0]-o,(e.y+e.height*s)*t[2]+t[1]],c=[-100,-100*s];break}return`translate(${i[0]}px, ${i[1]}px) translate(${c[0]}%, ${c[1]}%)`}function Xh({nodeId:e,children:t,className:n,style:o,isVisible:r,position:s=Y.Top,offset:i=10,align:c="center",...l}){const a=mi(),u=x.useCallback(S=>(Array.isArray(e)?e:[e||a||""]).reduce((A,$)=>{const k=S.nodeInternals.get($);return k&&A.push(k),A},[]),[e,a]),f=he(u,Fh),{transform:h,nodeOrigin:d,selectedNodesCount:y}=he(jh,Ce);if(!(typeof r=="boolean"?r:f.length===1&&f[0].selected&&y===1)||!f.length)return null;const w=mo(f,d),m=Math.max(...f.map(S=>{var v;return(((v=S[de])==null?void 0:v.z)||1)+1})),b={position:"absolute",transform:Wh(w,h,s,i,c),zIndex:m,...o};return M.createElement(Bh,null,M.createElement("div",{style:b,className:Re(["react-flow__node-toolbar",n]),...l},t))}function Yh({data:{resource:e,rest_api_doc:t,onDeleteResource:n,onResourceSelected:o,showData:r,auth:s}}){console.log(t);const[i,c]=x.useState(!1),[l,a]=x.useState(!1),[u,f]=x.useState(!1),h=()=>{a(!1)},d=()=>{f(!0)},y=()=>{f(!1)};return L.jsxs(L.Fragment,{children:[L.jsx(Xh,{isVisible:!0,position:Y.Top,children:L.jsx("div",{className:"flex justify-between",children:L.jsx("span",{className:"block font-semibold text-md text-center text-gray-700 dark:text-gray-300",children:e.name})})}),L.jsxs("div",{className:"cursor-pointer",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[L.jsx(en,{style:{},type:"target",position:Y.Right}),L.jsxs("div",{style:{width:"12vh",height:"4vh"},className:"inline-flex justify-between items-center px-2 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-md font-semibold text-xs text-center text-gray-700 dark:text-gray-300 tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-25 transition ease-in-out duration-150 ",children:[L.jsx("div",{children:e.data.data.length}),L.jsxs("div",{className:"flex gap-1",children:[L.jsx(Dc,{className:"hover:border rounded-full",style:{display:i?"block":"none"},size:17,onClick:()=>r(e)}),L.jsx(Pc,{className:"hover:border rounded-full",style:{display:i?"block":"none"},size:17,onClick:()=>o(e)}),L.jsx(As,{className:"hover:border hover:border-red rounded-full",style:{display:i?"block":"none"},color:"red",size:17,onClick:d})]})]}),L.jsx(en,{type:"source",position:Y.Left})]}),L.jsx(dt,{show:l,onClose:h,maxWidth:"5xl",children:L.jsx(bc,{resource:e,closeModal:h,restApis:t,auth:s})}),L.jsx(dt,{show:u,onClose:y,maxWidth:"xl",children:L.jsx(_c,{onDelete:n,resource:e,closeModal:y,auth:s})})]})}const qh=x.memo(Yh);function Zh({edgeConnections:e,nodeConnections:t,connectResources:n,deleteResource:o,setCurrentResource:r,showResourceData:s}){const[i,c,l]=Th([]),[a,u,f]=Rh([]);x.useState(!1);const h=x.useCallback(y=>{n(y.source,y.target)},[u]),d=x.useMemo(()=>({textUpdater:qh}),[]);return x.useEffect(()=>{for(let y=0;y<t.length;y++)t[y].data.onDeleteResource=o,t[y].data.onResourceSelected=r,t[y].data.showData=s;c(t),u(e)},[t,e]),L.jsx("div",{className:"cursor-pointer",style:{width:"100hv",height:"60vh"},children:L.jsx(Ui,{className:"cursor-default",nodes:i,edges:a,onNodesChange:l,onEdgesChange:f,panOnScroll:!1,panOnDrag:!1,attributionPosition:"bottom-left",onConnect:h,nodeTypes:d,zoomOnScroll:!1,minZoom:1.5,maxZoom:1.5,translateExtent:[[0,0],[500,500]],children:L.jsx(Lh,{showZoom:!1,showInteractive:!0,showFitView:!1,onZoomIn:()=>{},onZoomOut:()=>{},onFitView:()=>{},onInteractiveChange:()=>{}})})})}const tn=Math.min,It=Math.max,oo=Math.round,jn=Math.floor,St=e=>({x:e,y:e}),Gh={left:"right",right:"left",bottom:"top",top:"bottom"},Uh={start:"end",end:"start"};function Go(e,t,n){return It(e,tn(t,n))}function An(e,t){return typeof e=="function"?e(t):e}function Pt(e){return e.split("-")[0]}function Cn(e){return e.split("-")[1]}function Ji(e){return e==="x"?"y":"x"}function gr(e){return e==="y"?"height":"width"}function go(e){return["top","bottom"].includes(Pt(e))?"y":"x"}function yr(e){return Ji(go(e))}function Kh(e,t,n){n===void 0&&(n=!1);const o=Cn(e),r=yr(e),s=gr(r);let i=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=ro(i)),[i,ro(i)]}function Qh(e){const t=ro(e);return[Uo(e),t,Uo(t)]}function Uo(e){return e.replace(/start|end/g,t=>Uh[t])}function Jh(e,t,n){const o=["left","right"],r=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?s:i;default:return[]}}function ep(e,t,n,o){const r=Cn(e);let s=Jh(Pt(e),n==="start",o);return r&&(s=s.map(i=>i+"-"+r),t&&(s=s.concat(s.map(Uo)))),s}function ro(e){return e.replace(/left|right|bottom|top/g,t=>Gh[t])}function tp(e){return{top:0,right:0,bottom:0,left:0,...e}}function ec(e){return typeof e!="number"?tp(e):{top:e,right:e,bottom:e,left:e}}function so(e){const{x:t,y:n,width:o,height:r}=e;return{width:o,height:r,top:n,left:t,right:t+o,bottom:n+r,x:t,y:n}}function ds(e,t,n){let{reference:o,floating:r}=e;const s=go(t),i=yr(t),c=gr(i),l=Pt(t),a=s==="y",u=o.x+o.width/2-r.width/2,f=o.y+o.height/2-r.height/2,h=o[c]/2-r[c]/2;let d;switch(l){case"top":d={x:u,y:o.y-r.height};break;case"bottom":d={x:u,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:f};break;case"left":d={x:o.x-r.width,y:f};break;default:d={x:o.x,y:o.y}}switch(Cn(t)){case"start":d[i]-=h*(n&&a?-1:1);break;case"end":d[i]+=h*(n&&a?-1:1);break}return d}const np=async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:i}=n,c=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let a=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:f}=ds(a,o,l),h=o,d={},y=0;for(let g=0;g<c.length;g++){const{name:w,fn:m}=c[g],{x:b,y:S,data:v,reset:A}=await m({x:u,y:f,initialPlacement:o,placement:h,strategy:r,middlewareData:d,rects:a,platform:i,elements:{reference:e,floating:t}});u=b??u,f=S??f,d={...d,[w]:{...d[w],...v}},A&&y<=50&&(y++,typeof A=="object"&&(A.placement&&(h=A.placement),A.rects&&(a=A.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):A.rects),{x:u,y:f}=ds(a,h,l)),g=-1)}return{x:u,y:f,placement:h,strategy:r,middlewareData:d}};async function tc(e,t){var n;t===void 0&&(t={});const{x:o,y:r,platform:s,rects:i,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=An(t,e),y=ec(d),w=c[h?f==="floating"?"reference":"floating":f],m=so(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:a,rootBoundary:u,strategy:l})),b=f==="floating"?{x:o,y:r,width:i.floating.width,height:i.floating.height}:i.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),v=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},A=so(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:S,strategy:l}):b);return{top:(m.top-A.top+y.top)/v.y,bottom:(A.bottom-m.bottom+y.bottom)/v.y,left:(m.left-A.left+y.left)/v.x,right:(A.right-m.right+y.right)/v.x}}const op=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:s,platform:i,elements:c,middlewareData:l}=t,{element:a,padding:u=0}=An(e,t)||{};if(a==null)return{};const f=ec(u),h={x:n,y:o},d=yr(r),y=gr(d),g=await i.getDimensions(a),w=d==="y",m=w?"top":"left",b=w?"bottom":"right",S=w?"clientHeight":"clientWidth",v=s.reference[y]+s.reference[d]-h[d]-s.floating[y],A=h[d]-s.reference[d],$=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a));let k=$?$[S]:0;(!k||!await(i.isElement==null?void 0:i.isElement($)))&&(k=c.floating[S]||s.floating[y]);const I=v/2-A/2,D=k/2-g[y]/2-1,V=tn(f[m],D),O=tn(f[b],D),H=V,P=k-g[y]-O,p=k/2-g[y]/2+I,N=Go(H,p,P),_=!l.arrow&&Cn(r)!=null&&p!==N&&s.reference[y]/2-(p<H?V:O)-g[y]/2<0,T=_?p<H?p-H:p-P:0;return{[d]:h[d]+T,data:{[d]:N,centerOffset:p-N-T,..._&&{alignmentOffset:T}},reset:_}}}),rp=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:s,rects:i,initialPlacement:c,platform:l,elements:a}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=An(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const m=Pt(r),b=Pt(c)===c,S=await(l.isRTL==null?void 0:l.isRTL(a.floating)),v=h||(b||!g?[ro(c)]:Qh(c));!h&&y!=="none"&&v.push(...ep(c,g,y,S));const A=[c,...v],$=await tc(t,w),k=[];let I=((o=s.flip)==null?void 0:o.overflows)||[];if(u&&k.push($[m]),f){const H=Kh(r,i,S);k.push($[H[0]],$[H[1]])}if(I=[...I,{placement:r,overflows:k}],!k.every(H=>H<=0)){var D,V;const H=(((D=s.flip)==null?void 0:D.index)||0)+1,P=A[H];if(P)return{data:{index:H,overflows:I},reset:{placement:P}};let p=(V=I.filter(N=>N.overflows[0]<=0).sort((N,_)=>N.overflows[1]-_.overflows[1])[0])==null?void 0:V.placement;if(!p)switch(d){case"bestFit":{var O;const N=(O=I.map(_=>[_.placement,_.overflows.filter(T=>T>0).reduce((T,z)=>T+z,0)]).sort((_,T)=>_[1]-T[1])[0])==null?void 0:O[0];N&&(p=N);break}case"initialPlacement":p=c;break}if(r!==p)return{reset:{placement:p}}}return{}}}};async function sp(e,t){const{placement:n,platform:o,elements:r}=e,s=await(o.isRTL==null?void 0:o.isRTL(r.floating)),i=Pt(n),c=Cn(n),l=go(n)==="y",a=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,f=An(t,e);let{mainAxis:h,crossAxis:d,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return c&&typeof y=="number"&&(d=c==="end"?y*-1:y),l?{x:d*u,y:h*a}:{x:h*a,y:d*u}}const ip=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:s,placement:i,middlewareData:c}=t,l=await sp(t,e);return i===((n=c.offset)==null?void 0:n.placement)&&(o=c.arrow)!=null&&o.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:i}}}}},cp=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:c={fn:w=>{let{x:m,y:b}=w;return{x:m,y:b}}},...l}=An(e,t),a={x:n,y:o},u=await tc(t,l),f=go(Pt(r)),h=Ji(f);let d=a[h],y=a[f];if(s){const w=h==="y"?"top":"left",m=h==="y"?"bottom":"right",b=d+u[w],S=d-u[m];d=Go(b,d,S)}if(i){const w=f==="y"?"top":"left",m=f==="y"?"bottom":"right",b=y+u[w],S=y-u[m];y=Go(b,y,S)}const g=c.fn({...t,[h]:d,[f]:y});return{...g,data:{x:g.x-n,y:g.y-o}}}}};function on(e){return nc(e)?(e.nodeName||"").toLowerCase():"#document"}function He(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){var t;return(t=(nc(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nc(e){return e instanceof Node||e instanceof He(e).Node}function it(e){return e instanceof Element||e instanceof He(e).Element}function ct(e){return e instanceof HTMLElement||e instanceof He(e).HTMLElement}function hs(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof He(e).ShadowRoot}function kn(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=tt(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function lp(e){return["table","td","th"].includes(on(e))}function xr(e){const t=wr(),n=tt(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function ap(e){let t=Nt(e);for(;ct(t)&&!nn(t);){if(xr(t))return t;t=Nt(t)}return null}function wr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nn(e){return["html","body","#document"].includes(on(e))}function tt(e){return He(e).getComputedStyle(e)}function yo(e){return it(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Nt(e){if(on(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hs(e)&&e.host||gt(e);return hs(t)?t.host:t}function oc(e){const t=Nt(e);return nn(t)?e.ownerDocument?e.ownerDocument.body:e.body:ct(t)&&kn(t)?t:oc(t)}function _n(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=oc(e),s=r===((o=e.ownerDocument)==null?void 0:o.body),i=He(r);return s?t.concat(i,i.visualViewport||[],kn(r)?r:[],i.frameElement&&n?_n(i.frameElement):[]):t.concat(r,_n(r,[],n))}function rc(e){const t=tt(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=ct(e),s=r?e.offsetWidth:n,i=r?e.offsetHeight:o,c=oo(n)!==s||oo(o)!==i;return c&&(n=s,o=i),{width:n,height:o,$:c}}function vr(e){return it(e)?e:e.contextElement}function Gt(e){const t=vr(e);if(!ct(t))return St(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:s}=rc(t);let i=(s?oo(n.width):n.width)/o,c=(s?oo(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const up=St(0);function sc(e){const t=He(e);return!wr()||!t.visualViewport?up:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function fp(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==He(e)?!1:t}function Ot(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=vr(e);let i=St(1);t&&(o?it(o)&&(i=Gt(o)):i=Gt(e));const c=fp(s,n,o)?sc(s):St(0);let l=(r.left+c.x)/i.x,a=(r.top+c.y)/i.y,u=r.width/i.x,f=r.height/i.y;if(s){const h=He(s),d=o&&it(o)?He(o):o;let y=h,g=y.frameElement;for(;g&&o&&d!==y;){const w=Gt(g),m=g.getBoundingClientRect(),b=tt(g),S=m.left+(g.clientLeft+parseFloat(b.paddingLeft))*w.x,v=m.top+(g.clientTop+parseFloat(b.paddingTop))*w.y;l*=w.x,a*=w.y,u*=w.x,f*=w.y,l+=S,a+=v,y=He(g),g=y.frameElement}}return so({width:u,height:f,x:l,y:a})}const dp=[":popover-open",":modal"];function br(e){return dp.some(t=>{try{return e.matches(t)}catch{return!1}})}function hp(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const s=r==="fixed",i=gt(o),c=t?br(t.floating):!1;if(o===i||c&&s)return n;let l={scrollLeft:0,scrollTop:0},a=St(1);const u=St(0),f=ct(o);if((f||!f&&!s)&&((on(o)!=="body"||kn(i))&&(l=yo(o)),ct(o))){const h=Ot(o);a=Gt(o),u.x=h.x+o.clientLeft,u.y=h.y+o.clientTop}return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-l.scrollLeft*a.x+u.x,y:n.y*a.y-l.scrollTop*a.y+u.y}}function pp(e){return Array.from(e.getClientRects())}function ic(e){return Ot(gt(e)).left+yo(e).scrollLeft}function mp(e){const t=gt(e),n=yo(e),o=e.ownerDocument.body,r=It(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=It(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let i=-n.scrollLeft+ic(e);const c=-n.scrollTop;return tt(o).direction==="rtl"&&(i+=It(t.clientWidth,o.clientWidth)-r),{width:r,height:s,x:i,y:c}}function gp(e,t){const n=He(e),o=gt(e),r=n.visualViewport;let s=o.clientWidth,i=o.clientHeight,c=0,l=0;if(r){s=r.width,i=r.height;const a=wr();(!a||a&&t==="fixed")&&(c=r.offsetLeft,l=r.offsetTop)}return{width:s,height:i,x:c,y:l}}function yp(e,t){const n=Ot(e,!0,t==="fixed"),o=n.top+e.clientTop,r=n.left+e.clientLeft,s=ct(e)?Gt(e):St(1),i=e.clientWidth*s.x,c=e.clientHeight*s.y,l=r*s.x,a=o*s.y;return{width:i,height:c,x:l,y:a}}function ps(e,t,n){let o;if(t==="viewport")o=gp(e,n);else if(t==="document")o=mp(gt(e));else if(it(t))o=yp(t,n);else{const r=sc(e);o={...t,x:t.x-r.x,y:t.y-r.y}}return so(o)}function cc(e,t){const n=Nt(e);return n===t||!it(n)||nn(n)?!1:tt(n).position==="fixed"||cc(n,t)}function xp(e,t){const n=t.get(e);if(n)return n;let o=_n(e,[],!1).filter(c=>it(c)&&on(c)!=="body"),r=null;const s=tt(e).position==="fixed";let i=s?Nt(e):e;for(;it(i)&&!nn(i);){const c=tt(i),l=xr(i);!l&&c.position==="fixed"&&(r=null),(s?!l&&!r:!l&&c.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||kn(i)&&!l&&cc(e,i))?o=o.filter(u=>u!==i):r=c,i=Nt(i)}return t.set(e,o),o}function wp(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i=[...n==="clippingAncestors"?br(t)?[]:xp(t,this._c):[].concat(n),o],c=i[0],l=i.reduce((a,u)=>{const f=ps(t,u,r);return a.top=It(f.top,a.top),a.right=tn(f.right,a.right),a.bottom=tn(f.bottom,a.bottom),a.left=It(f.left,a.left),a},ps(t,c,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function vp(e){const{width:t,height:n}=rc(e);return{width:t,height:n}}function bp(e,t,n){const o=ct(t),r=gt(t),s=n==="fixed",i=Ot(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const l=St(0);if(o||!o&&!s)if((on(t)!=="body"||kn(r))&&(c=yo(t)),o){const f=Ot(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=ic(r));const a=i.left+c.scrollLeft-l.x,u=i.top+c.scrollTop-l.y;return{x:a,y:u,width:i.width,height:i.height}}function Ro(e){return tt(e).position==="static"}function ms(e,t){return!ct(e)||tt(e).position==="fixed"?null:t?t(e):e.offsetParent}function lc(e,t){const n=He(e);if(br(e))return n;if(!ct(e)){let r=Nt(e);for(;r&&!nn(r);){if(it(r)&&!Ro(r))return r;r=Nt(r)}return n}let o=ms(e,t);for(;o&&lp(o)&&Ro(o);)o=ms(o,t);return o&&nn(o)&&Ro(o)&&!xr(o)?n:o||ap(e)||n}const _p=async function(e){const t=this.getOffsetParent||lc,n=this.getDimensions,o=await n(e.floating);return{reference:bp(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Ep(e){return tt(e).direction==="rtl"}const Sp={convertOffsetParentRelativeRectToViewportRelativeRect:hp,getDocumentElement:gt,getClippingRect:wp,getOffsetParent:lc,getElementRects:_p,getClientRects:pp,getDimensions:vp,getScale:Gt,isElement:it,isRTL:Ep};function Np(e,t){let n=null,o;const r=gt(e);function s(){var c;clearTimeout(o),(c=n)==null||c.disconnect(),n=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),s();const{left:a,top:u,width:f,height:h}=e.getBoundingClientRect();if(c||t(),!f||!h)return;const d=jn(u),y=jn(r.clientWidth-(a+f)),g=jn(r.clientHeight-(u+h)),w=jn(a),b={rootMargin:-d+"px "+-y+"px "+-g+"px "+-w+"px",threshold:It(0,tn(1,l))||1};let S=!0;function v(A){const $=A[0].intersectionRatio;if($!==l){if(!S)return i();$?i(!1,$):o=setTimeout(()=>{i(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(v,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(v,b)}n.observe(e)}return i(!0),s}function Ap(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,a=vr(e),u=r||s?[...a?_n(a):[],..._n(t)]:[];u.forEach(m=>{r&&m.addEventListener("scroll",n,{passive:!0}),s&&m.addEventListener("resize",n)});const f=a&&c?Np(a,n):null;let h=-1,d=null;i&&(d=new ResizeObserver(m=>{let[b]=m;b&&b.target===a&&d&&(d.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=d)==null||S.observe(t)})),n()}),a&&!l&&d.observe(a),d.observe(t));let y,g=l?Ot(e):null;l&&w();function w(){const m=Ot(e);g&&(m.x!==g.x||m.y!==g.y||m.width!==g.width||m.height!==g.height)&&n(),g=m,y=requestAnimationFrame(w)}return n(),()=>{var m;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(m=d)==null||m.disconnect(),d=null,l&&cancelAnimationFrame(y)}}const Cp=ip,kp=cp,Mp=rp,Tp=op,gs=(e,t,n)=>{const o=new Map,r={platform:Sp,...n},s={...r.platform,_c:o};return np(e,t,{...r,platform:s})};var ac={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",i=0;i<arguments.length;i++){var c=arguments[i];c&&(s=r(s,o(c)))}return s}function o(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var i="";for(var c in s)t.call(s,c)&&s[c]&&(i=r(i,c));return i}function r(s,i){return i?s?s+" "+i:s+i:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(ac);var Rp=ac.exports;const Ko=Ns(Rp);var ys={};const $p="react-tooltip-core-styles",Ip="react-tooltip-base-styles",xs={core:!1,base:!1};function ws({css:e,id:t=Ip,type:n="base",ref:o}){var r,s;if(!e||typeof document>"u"||xs[n]||n==="core"&&typeof process<"u"&&(!((r=process==null?void 0:ys)===null||r===void 0)&&r.REACT_TOOLTIP_DISABLE_CORE_STYLES)||n!=="base"&&typeof process<"u"&&(!((s=process==null?void 0:ys)===null||s===void 0)&&s.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;n==="core"&&(t=$p),o||(o={});const{insertAt:i}=o;if(document.getElementById(t))return void console.warn(`[react-tooltip] Element with id '${t}' already exists. Call \`removeStyle()\` first`);const c=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.id=t,l.type="text/css",i==="top"&&c.firstChild?c.insertBefore(l,c.firstChild):c.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e)),xs[n]=!0}const vs=async({elementReference:e=null,tooltipReference:t=null,tooltipArrowReference:n=null,place:o="top",offset:r=10,strategy:s="absolute",middlewares:i=[Cp(Number(r)),Mp({fallbackAxisSideDirection:"start"}),kp({padding:5})],border:c})=>{if(!e)return{tooltipStyles:{},tooltipArrowStyles:{},place:o};if(t===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:o};const l=i;return n?(l.push(Tp({element:n,padding:5})),gs(e,t,{placement:o,strategy:s,middleware:l}).then(({x:a,y:u,placement:f,middlewareData:h})=>{var d,y;const g={left:`${a}px`,top:`${u}px`,border:c},{x:w,y:m}=(d=h.arrow)!==null&&d!==void 0?d:{x:0,y:0},b=(y={top:"bottom",right:"left",bottom:"top",left:"right"}[f.split("-")[0]])!==null&&y!==void 0?y:"bottom",S=c&&{borderBottom:c,borderRight:c};let v=0;if(c){const A=`${c}`.match(/(\d+)px/);v=A!=null&&A[1]?Number(A[1]):1}return{tooltipStyles:g,tooltipArrowStyles:{left:w!=null?`${w}px`:"",top:m!=null?`${m}px`:"",right:"",bottom:"",...S,[b]:`-${4+v}px`},place:f}})):gs(e,t,{placement:"bottom",strategy:s,middleware:l}).then(({x:a,y:u,placement:f})=>({tooltipStyles:{left:`${a}px`,top:`${u}px`},tooltipArrowStyles:{},place:f}))},bs=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),_s=(e,t,n)=>{let o=null;const r=function(...s){const i=()=>{o=null,n||e.apply(this,s)};n&&!o&&(e.apply(this,s),o=setTimeout(i,t)),n||(o&&clearTimeout(o),o=setTimeout(i,t))};return r.cancel=()=>{o&&(clearTimeout(o),o=null)},r},Es=e=>e!==null&&!Array.isArray(e)&&typeof e=="object",Qo=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>Qo(r,t[s]));if(Array.isArray(e)!==Array.isArray(t))return!1;if(!Es(e)||!Es(t))return e===t;const n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every(r=>Qo(e[r],t[r]))},Dp=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some(n=>{const o=t.getPropertyValue(n);return o==="auto"||o==="scroll"})},Ss=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(Dp(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},zp=typeof window<"u"?x.useLayoutEffect:x.useEffect,Pp="DEFAULT_TOOLTIP_ID",Op={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},Lp=x.createContext({getTooltipData:()=>Op});function uc(e=Pp){return x.useContext(Lp).getTooltipData(e)}var jt={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},$o={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const Hp=({forwardRef:e,id:t,className:n,classNameArrow:o,variant:r="dark",anchorId:s,anchorSelect:i,place:c="top",offset:l=10,events:a=["hover"],openOnClick:u=!1,positionStrategy:f="absolute",middlewares:h,wrapper:d,delayShow:y=0,delayHide:g=0,float:w=!1,hidden:m=!1,noArrow:b=!1,clickable:S=!1,closeOnEsc:v=!1,closeOnScroll:A=!1,closeOnResize:$=!1,openEvents:k,closeEvents:I,globalCloseEvents:D,imperativeModeOnly:V,style:O,position:H,afterShow:P,afterHide:p,content:N,contentWrapperRef:_,isOpen:T,defaultIsOpen:z=!1,setIsOpen:E,activeAnchor:C,setActiveAnchor:R,border:B,opacity:X,arrowColor:W,role:U="tooltip"})=>{var Q;const Z=x.useRef(null),ne=x.useRef(null),J=x.useRef(null),ee=x.useRef(null),le=x.useRef(null),[pe,Ee]=x.useState({tooltipStyles:{},tooltipArrowStyles:{},place:c}),[ae,oe]=x.useState(!1),[ye,se]=x.useState(!1),[F,we]=x.useState(null),ze=x.useRef(!1),Ue=x.useRef(null),{anchorRefs:Ve,setActiveAnchor:Ke}=uc(t),Se=x.useRef(!1),[ke,Pe]=x.useState([]),Me=x.useRef(!1),Oe=u||a.includes("click"),Fe=Oe||(k==null?void 0:k.click)||(k==null?void 0:k.dblclick)||(k==null?void 0:k.mousedown),je=k?{...k}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!k&&Oe&&Object.assign(je,{mouseenter:!1,focus:!1,click:!0});const ge=I?{...I}:{mouseleave:!0,blur:!0,click:!1,dblclick:!1,mouseup:!1};!I&&Oe&&Object.assign(ge,{mouseleave:!1,blur:!1});const me=D?{...D}:{escape:v||!1,scroll:A||!1,resize:$||!1,clickOutsideAnchor:Fe||!1};V&&(Object.assign(je,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(ge,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(me,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),zp(()=>(Me.current=!0,()=>{Me.current=!1}),[]);const ce=j=>{Me.current&&(j&&se(!0),setTimeout(()=>{Me.current&&(E==null||E(j),T===void 0&&oe(j))},10))};x.useEffect(()=>{if(T===void 0)return()=>null;T&&se(!0);const j=setTimeout(()=>{oe(T)},10);return()=>{clearTimeout(j)}},[T]),x.useEffect(()=>{if(ae!==ze.current)if(le.current&&clearTimeout(le.current),ze.current=ae,ae)P==null||P();else{const j=(G=>{const K=G.match(/^([\d.]+)(ms|s)$/);if(!K)return 0;const[,xe,ve]=K;return Number(xe)*(ve==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));le.current=setTimeout(()=>{se(!1),we(null),p==null||p()},j+25)}},[ae]);const We=j=>{Ee(G=>Qo(G,j)?G:j)},Le=(j=y)=>{J.current&&clearTimeout(J.current),ye?ce(!0):J.current=setTimeout(()=>{ce(!0)},j)},Ne=(j=g)=>{ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{Se.current||ce(!1)},j)},Ae=j=>{var G;if(!j)return;const K=(G=j.currentTarget)!==null&&G!==void 0?G:j.target;if(!(K!=null&&K.isConnected))return R(null),void Ke({current:null});y?Le():ce(!0),R(K),Ke({current:K}),ee.current&&clearTimeout(ee.current)},Xe=()=>{S?Ne(g||100):g?Ne():ce(!1),J.current&&clearTimeout(J.current)},ot=({x:j,y:G})=>{var K;const xe={getBoundingClientRect:()=>({x:j,y:G,width:0,height:0,top:G,left:j,right:j,bottom:G})};vs({place:(K=F==null?void 0:F.place)!==null&&K!==void 0?K:c,offset:l,elementReference:xe,tooltipReference:Z.current,tooltipArrowReference:ne.current,strategy:f,middlewares:h,border:B}).then(ve=>{We(ve)})},Ye=j=>{if(!j)return;const G=j,K={x:G.clientX,y:G.clientY};ot(K),Ue.current=K},at=j=>{var G;if(!ae)return;const K=j.target;K.isConnected&&(!((G=Z.current)===null||G===void 0)&&G.contains(K)||[document.querySelector(`[id='${s}']`),...ke].some(xe=>xe==null?void 0:xe.contains(K))||(ce(!1),J.current&&clearTimeout(J.current)))},At=_s(Ae,50,!0),ue=_s(Xe,50,!0),$e=j=>{ue.cancel(),At(j)},q=()=>{At.cancel(),ue()},re=x.useCallback(()=>{var j,G;const K=(j=F==null?void 0:F.position)!==null&&j!==void 0?j:H;K?ot(K):w?Ue.current&&ot(Ue.current):C!=null&&C.isConnected&&vs({place:(G=F==null?void 0:F.place)!==null&&G!==void 0?G:c,offset:l,elementReference:C,tooltipReference:Z.current,tooltipArrowReference:ne.current,strategy:f,middlewares:h,border:B}).then(xe=>{Me.current&&We(xe)})},[ae,C,N,O,c,F==null?void 0:F.place,l,f,H,F==null?void 0:F.position,w]);x.useEffect(()=>{var j,G;const K=new Set(Ve);ke.forEach(ie=>{K.add({current:ie})});const xe=document.querySelector(`[id='${s}']`);xe&&K.add({current:xe});const ve=()=>{ce(!1)},qe=Ss(C),Ze=Ss(Z.current);me.scroll&&(window.addEventListener("scroll",ve),qe==null||qe.addEventListener("scroll",ve),Ze==null||Ze.addEventListener("scroll",ve));let be=null;me.resize?window.addEventListener("resize",ve):C&&Z.current&&(be=Ap(C,Z.current,re,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Ie=ie=>{ie.key==="Escape"&&ce(!1)};me.escape&&window.addEventListener("keydown",Ie),me.clickOutsideAnchor&&window.addEventListener("click",at);const fe=[],Ct=ie=>{ae&&(ie==null?void 0:ie.target)===C||Ae(ie)},xo=ie=>{ae&&(ie==null?void 0:ie.target)===C&&Xe()},Mn=["mouseenter","mouseleave","focus","blur"],Tn=["click","dblclick","mousedown","mouseup"];Object.entries(je).forEach(([ie,Qe])=>{Qe&&(Mn.includes(ie)?fe.push({event:ie,listener:$e}):Tn.includes(ie)&&fe.push({event:ie,listener:Ct}))}),Object.entries(ge).forEach(([ie,Qe])=>{Qe&&(Mn.includes(ie)?fe.push({event:ie,listener:q}):Tn.includes(ie)&&fe.push({event:ie,listener:xo}))}),w&&fe.push({event:"pointermove",listener:Ye});const Rn=()=>{Se.current=!0},$n=()=>{Se.current=!1,Xe()};return S&&!Fe&&((j=Z.current)===null||j===void 0||j.addEventListener("mouseenter",Rn),(G=Z.current)===null||G===void 0||G.addEventListener("mouseleave",$n)),fe.forEach(({event:ie,listener:Qe})=>{K.forEach(rn=>{var kt;(kt=rn.current)===null||kt===void 0||kt.addEventListener(ie,Qe)})}),()=>{var ie,Qe;me.scroll&&(window.removeEventListener("scroll",ve),qe==null||qe.removeEventListener("scroll",ve),Ze==null||Ze.removeEventListener("scroll",ve)),me.resize?window.removeEventListener("resize",ve):be==null||be(),me.clickOutsideAnchor&&window.removeEventListener("click",at),me.escape&&window.removeEventListener("keydown",Ie),S&&!Fe&&((ie=Z.current)===null||ie===void 0||ie.removeEventListener("mouseenter",Rn),(Qe=Z.current)===null||Qe===void 0||Qe.removeEventListener("mouseleave",$n)),fe.forEach(({event:rn,listener:kt})=>{K.forEach(wo=>{var sn;(sn=wo.current)===null||sn===void 0||sn.removeEventListener(rn,kt)})})}},[C,re,ye,Ve,ke,k,I,D,Oe,y,g]),x.useEffect(()=>{var j,G;let K=(G=(j=F==null?void 0:F.anchorSelect)!==null&&j!==void 0?j:i)!==null&&G!==void 0?G:"";!K&&t&&(K=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`);const xe=new MutationObserver(ve=>{const qe=[],Ze=[];ve.forEach(be=>{if(be.type==="attributes"&&be.attributeName==="data-tooltip-id"&&(be.target.getAttribute("data-tooltip-id")===t?qe.push(be.target):be.oldValue===t&&Ze.push(be.target)),be.type==="childList"){if(C){const Ie=[...be.removedNodes].filter(fe=>fe.nodeType===1);if(K)try{Ze.push(...Ie.filter(fe=>fe.matches(K))),Ze.push(...Ie.flatMap(fe=>[...fe.querySelectorAll(K)]))}catch{}Ie.some(fe=>{var Ct;return!!(!((Ct=fe==null?void 0:fe.contains)===null||Ct===void 0)&&Ct.call(fe,C))&&(se(!1),ce(!1),R(null),J.current&&clearTimeout(J.current),ee.current&&clearTimeout(ee.current),!0)})}if(K)try{const Ie=[...be.addedNodes].filter(fe=>fe.nodeType===1);qe.push(...Ie.filter(fe=>fe.matches(K))),qe.push(...Ie.flatMap(fe=>[...fe.querySelectorAll(K)]))}catch{}}}),(qe.length||Ze.length)&&Pe(be=>[...be.filter(Ie=>!Ze.includes(Ie)),...qe])});return xe.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{xe.disconnect()}},[t,i,F==null?void 0:F.anchorSelect,C]),x.useEffect(()=>{re()},[re]),x.useEffect(()=>{if(!(_!=null&&_.current))return()=>null;const j=new ResizeObserver(()=>{setTimeout(()=>re())});return j.observe(_.current),()=>{j.disconnect()}},[N,_==null?void 0:_.current]),x.useEffect(()=>{var j;const G=document.querySelector(`[id='${s}']`),K=[...ke,G];C&&K.includes(C)||R((j=ke[0])!==null&&j!==void 0?j:G)},[s,ke,C]),x.useEffect(()=>(z&&ce(!0),()=>{J.current&&clearTimeout(J.current),ee.current&&clearTimeout(ee.current)}),[]),x.useEffect(()=>{var j;let G=(j=F==null?void 0:F.anchorSelect)!==null&&j!==void 0?j:i;if(!G&&t&&(G=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`),G)try{const K=Array.from(document.querySelectorAll(G));Pe(K)}catch{Pe([])}},[t,i,F==null?void 0:F.anchorSelect]),x.useEffect(()=>{J.current&&(clearTimeout(J.current),Le(y))},[y]);const Te=(Q=F==null?void 0:F.content)!==null&&Q!==void 0?Q:N,ut=ae&&Object.keys(pe.tooltipStyles).length>0;return x.useImperativeHandle(e,()=>({open:j=>{if(j!=null&&j.anchorSelect)try{document.querySelector(j.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${j.anchorSelect}" is not a valid CSS selector`)}we(j??null),j!=null&&j.delay?Le(j.delay):ce(!0)},close:j=>{j!=null&&j.delay?Ne(j.delay):ce(!1)},activeAnchor:C,place:pe.place,isOpen:!!(ye&&!m&&Te&&ut)})),ye&&!m&&Te?M.createElement(d,{id:t,role:U,className:Ko("react-tooltip",jt.tooltip,$o.tooltip,$o[r],n,`react-tooltip__place-${pe.place}`,jt[ut?"show":"closing"],ut?"react-tooltip__show":"react-tooltip__closing",f==="fixed"&&jt.fixed,S&&jt.clickable),onTransitionEnd:j=>{le.current&&clearTimeout(le.current),ae||j.propertyName!=="opacity"||(se(!1),we(null),p==null||p())},style:{...O,...pe.tooltipStyles,opacity:X!==void 0&&ut?X:void 0},ref:Z},Te,M.createElement(d,{className:Ko("react-tooltip-arrow",jt.arrow,$o.arrow,o,b&&jt.noArrow),style:{...pe.tooltipArrowStyles,background:W?`linear-gradient(to right bottom, transparent 50%, ${W} 50%)`:void 0},ref:ne})):null},Bp=({content:e})=>M.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),Vp=M.forwardRef(({id:e,anchorId:t,anchorSelect:n,content:o,html:r,render:s,className:i,classNameArrow:c,variant:l="dark",place:a="top",offset:u=10,wrapper:f="div",children:h=null,events:d=["hover"],openOnClick:y=!1,positionStrategy:g="absolute",middlewares:w,delayShow:m=0,delayHide:b=0,float:S=!1,hidden:v=!1,noArrow:A=!1,clickable:$=!1,closeOnEsc:k=!1,closeOnScroll:I=!1,closeOnResize:D=!1,openEvents:V,closeEvents:O,globalCloseEvents:H,imperativeModeOnly:P=!1,style:p,position:N,isOpen:_,defaultIsOpen:T=!1,disableStyleInjection:z=!1,border:E,opacity:C,arrowColor:R,setIsOpen:B,afterShow:X,afterHide:W,role:U="tooltip"},Q)=>{const[Z,ne]=x.useState(o),[J,ee]=x.useState(r),[le,pe]=x.useState(a),[Ee,ae]=x.useState(l),[oe,ye]=x.useState(u),[se,F]=x.useState(m),[we,ze]=x.useState(b),[Ue,Ve]=x.useState(S),[Ke,Se]=x.useState(v),[ke,Pe]=x.useState(f),[Me,Oe]=x.useState(d),[Fe,je]=x.useState(g),[ge,me]=x.useState(null),[ce,We]=x.useState(null),Le=x.useRef(z),{anchorRefs:Ne,activeAnchor:Ae}=uc(e),Xe=ue=>ue==null?void 0:ue.getAttributeNames().reduce(($e,q)=>{var re;return q.startsWith("data-tooltip-")&&($e[q.replace(/^data-tooltip-/,"")]=(re=ue==null?void 0:ue.getAttribute(q))!==null&&re!==void 0?re:null),$e},{}),ot=ue=>{const $e={place:q=>{var re;pe((re=q)!==null&&re!==void 0?re:a)},content:q=>{ne(q??o)},html:q=>{ee(q??r)},variant:q=>{var re;ae((re=q)!==null&&re!==void 0?re:l)},offset:q=>{ye(q===null?u:Number(q))},wrapper:q=>{var re;Pe((re=q)!==null&&re!==void 0?re:f)},events:q=>{const re=q==null?void 0:q.split(" ");Oe(re??d)},"position-strategy":q=>{var re;je((re=q)!==null&&re!==void 0?re:g)},"delay-show":q=>{F(q===null?m:Number(q))},"delay-hide":q=>{ze(q===null?b:Number(q))},float:q=>{Ve(q===null?S:q==="true")},hidden:q=>{Se(q===null?v:q==="true")},"class-name":q=>{me(q)}};Object.values($e).forEach(q=>q(null)),Object.entries(ue).forEach(([q,re])=>{var Te;(Te=$e[q])===null||Te===void 0||Te.call($e,re)})};x.useEffect(()=>{ne(o)},[o]),x.useEffect(()=>{ee(r)},[r]),x.useEffect(()=>{pe(a)},[a]),x.useEffect(()=>{ae(l)},[l]),x.useEffect(()=>{ye(u)},[u]),x.useEffect(()=>{F(m)},[m]),x.useEffect(()=>{ze(b)},[b]),x.useEffect(()=>{Ve(S)},[S]),x.useEffect(()=>{Se(v)},[v]),x.useEffect(()=>{je(g)},[g]),x.useEffect(()=>{Le.current!==z&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[z]),x.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:z==="core",disableBase:z}}))},[]),x.useEffect(()=>{var ue;const $e=new Set(Ne);let q=n;if(!q&&e&&(q=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`),q)try{document.querySelectorAll(q).forEach(G=>{$e.add({current:G})})}catch{console.warn(`[react-tooltip] "${q}" is not a valid CSS selector`)}const re=document.querySelector(`[id='${t}']`);if(re&&$e.add({current:re}),!$e.size)return()=>null;const Te=(ue=ce??re)!==null&&ue!==void 0?ue:Ae.current,ut=new MutationObserver(G=>{G.forEach(K=>{var xe;if(!Te||K.type!=="attributes"||!(!((xe=K.attributeName)===null||xe===void 0)&&xe.startsWith("data-tooltip-")))return;const ve=Xe(Te);ot(ve)})}),j={attributes:!0,childList:!1,subtree:!1};if(Te){const G=Xe(Te);ot(G),ut.observe(Te,j)}return()=>{ut.disconnect()}},[Ne,Ae,ce,t,n]),x.useEffect(()=>{p!=null&&p.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),E&&!bs("border",`${E}`)&&console.warn(`[react-tooltip] "${E}" is not a valid \`border\`.`),p!=null&&p.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),C&&!bs("opacity",`${C}`)&&console.warn(`[react-tooltip] "${C}" is not a valid \`opacity\`.`)},[]);let Ye=h;const at=x.useRef(null);if(s){const ue=s({content:(ce==null?void 0:ce.getAttribute("data-tooltip-content"))||Z||null,activeAnchor:ce});Ye=ue?M.createElement("div",{ref:at,className:"react-tooltip-content-wrapper"},ue):null}else Z&&(Ye=Z);J&&(Ye=M.createElement(Bp,{content:J}));const At={forwardRef:Q,id:e,anchorId:t,anchorSelect:n,className:Ko(i,ge),classNameArrow:c,content:Ye,contentWrapperRef:at,place:le,variant:Ee,offset:oe,wrapper:ke,events:Me,openOnClick:y,positionStrategy:Fe,middlewares:w,delayShow:se,delayHide:we,float:Ue,hidden:Ke,noArrow:A,clickable:$,closeOnEsc:k,closeOnScroll:I,closeOnResize:D,openEvents:V,closeEvents:O,globalCloseEvents:H,imperativeModeOnly:P,style:p,position:N,isOpen:_,defaultIsOpen:T,border:E,opacity:C,arrowColor:R,setIsOpen:B,afterShow:X,afterHide:W,activeAnchor:ce,setActiveAnchor:ue=>We(ue),role:U};return M.createElement(Hp,{...At})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",e=>{e.detail.disableCore||ws({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||ws({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});function mm({project:e,max_fields:t,max_resources:n,endpoint:o,auth:r}){const[s,i]=x.useState(!1);x.useState(!1);const[c,l]=x.useState(!1),[a,u]=x.useState(!1),[f,h]=x.useState(!1),[d,y]=x.useState(!1),[g,w]=x.useState(!1),[m,b]=x.useState([]),[S,v]=x.useState([]),[A,$]=x.useState([]),[k,I]=x.useState(null),[D,V]=x.useState(!1);x.useState(!1);const{data:O,setData:H,post:P,processing:p,errors:N,reset:_}=gc({project_uuid:e.uuid,resource_description:"this is simple shopping list app"}),T=()=>{i(!1),le()},z=()=>{h(!0)},E=()=>{h(!1),le()},C=()=>{l(!1)},R=()=>{y(!1)},B=()=>{u(!0)},X=()=>{u(!1)},W=()=>{w(!0)},U=()=>{w(!1)},Q=oe=>{I(oe),W()},Z=()=>{V(!0)},ne=()=>{V(!1)},J=oe=>{I(oe),Z()},ee=oe=>{oe?(yt.success("Resource deleted successfully"),le()):yt.error("Failed to delete resource")},le=()=>{xc.get(route("resources.index",{project:e})).then(oe=>{b(oe.data.data.resources),v(oe.data.data.nodes),$(oe.data.data.edges)})},pe=(oe,ye)=>{wc.post(route("relations.connect"),{source:oe,destination:ye},{onSuccess:()=>{yt.success("Connected"),le(),U()},onError:()=>{yt.error("Failed to connect")}})};x.useEffect(()=>{le()},[]);const Ee=()=>{try{P(route("data.generate-all",{project:e}),{preserveScroll:!0,onSuccess:()=>{yt.success("Resources generated successfully"),le()},onError:()=>{yt.error("Error generating ")}})}catch{yt.error("Error generating data")}},ae=()=>{P(route("data.reset-all",{project:e}),{preserveScroll:!0,onSuccess:()=>{yt.success("Resources reset successfully"),le()}})};return L.jsxs(vc,{user:r.user,header:L.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{children:"Projects /"}),L.jsx("div",{className:"ml-2",children:e.name}),L.jsxs("div",{className:"ml-2",children:[L.jsxs(Lt,{children:[L.jsx("div",{"data-tooltip-id":"project-actions","data-tooltip-content":"Project actions",children:L.jsx(Lt.Trigger,{children:L.jsx("span",{className:"inline-flex rounded-md",children:L.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-gray-400 text-sm leading-4 font-medium rounded-full dark:text-gray-400 bg-white dark:bg-gray-800 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none transition ease-in-out duration-150",children:L.jsx(Ec,{size:"20"})})})})}),L.jsxs(Lt.Content,{children:[L.jsxs(Lt.Button,{onClick:()=>y(!0),children:[L.jsx(Sc,{size:"20"})," ",L.jsx("h6",{className:"ml-2",children:"Edit"})]}),L.jsxs(Lt.Button,{onClick:B,children:[L.jsx(zc,{size:"20"})," ",L.jsx("h6",{className:"ml-2",children:"Export"})]}),L.jsx("hr",{className:"m-1"}),L.jsxs(Lt.Button,{onClick:()=>l(!0),children:[L.jsx(As,{size:"20",color:"red"})," ",L.jsx("h6",{className:"ml-2",children:"Delete"})]})]})]}),L.jsx(Vp,{id:"project-actions",style:{backgroundColor:"#1f2937",color:"white"},place:"bottom"})]})]})}),children:[L.jsx(yc,{title:e.name}),L.jsx("div",{className:"py-4",children:L.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:L.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:L.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100 overflow-x-auto whitespace-nowrap mx-auto",children:[L.jsx(Oc,{projectUUID:e.uuid,endpoint:o,auth:r}),L.jsxs("div",{className:"flex justify-end mt-2",children:[L.jsx(In,{type:"button",onClick:Ee,children:"Generate All"}),L.jsx(In,{type:"button",onClick:ae,className:"ml-2",children:"Reset All"})]})]})})})}),L.jsx("div",{children:L.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:L.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[L.jsxs("div",{className:"m-6 flex justify-between",children:[L.jsx("h2",{className:"font-semibold mb-2 text-lg dark:text-gray-800",children:"Resources"}),L.jsxs("div",{children:[L.jsxs(In,{disabled:m.length>=n,onClick:()=>i(!0),children:[L.jsx($c,{size:15}),"  Create (",n-m.length,")"]}),L.jsxs(In,{className:"ml-2",disabled:m.length==5,onClick:z,children:[L.jsx(Ic,{size:15}),"  Generate With AI"]})]})]}),L.jsxs("div",{className:"pl-6 pr-6 text-gray-900 dark:text-gray-100",children:[m.length===0&&L.jsxs("div",{className:"text-center",children:[L.jsx("p",{className:"text-lg font-medium",children:"No resource found"}),L.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create a new resource to get started"})]}),L.jsx(Zh,{auth:r,nodeConnections:S,edgeConnections:A,deleteResource:ee,setCurrentResource:Q,connectResources:pe,showResourceData:J})]})]})})}),L.jsx(dt,{show:s,onClose:T,maxWidth:"5xl",children:L.jsx(Nc,{project:e,maxFields:t,auth:r,closeModal:T})}),L.jsx(dt,{show:f,onClose:E,maxWidth:"5xl",children:L.jsx(Ac,{project:e,closeModal:E,auth:r})}),L.jsx(dt,{show:c,onClose:C,maxWidth:"xl",children:L.jsx(Cc,{project:e,closeModal:C,auth:r})}),L.jsx(dt,{show:d,onClose:R,maxWidth:"2xl",children:L.jsx(kc,{project:e,closeModal:R,auth:r})}),L.jsx(dt,{show:a,onClose:X,maxWidth:"4xl",children:L.jsx(Mc,{project:e,closeModal:X,auth:r})}),L.jsx(dt,{show:g,onClose:U,maxWidth:"xl",children:L.jsx(Tc,{resources:m,currentResource:k,connectResources:pe,auth:r})}),L.jsx(dt,{show:D,onClose:ne,maxWidth:"xl",children:L.jsx(Rc,{closeModal:ne,resource:k,auth:r})})]})}export{mm as default};

import{W as C,r as i,c as F,j as e}from"./app-CZhfLiTu.js";import{I}from"./InputLabel-DsSktp15.js";import{T as f}from"./TextInput-DOBj14Kb.js";import{I as p}from"./InputError-CULqF8g_.js";import{S as n}from"./SecondaryButton-BIWPg8US.js";import{P}from"./PrimaryButton-BhTwtr4b.js";import{_ as E}from"./index-Bq3bK6iY.js";import{I as x}from"./IconX-w1s9xP6B.js";import{I as S}from"./IconPlus-Bfhgoxa_.js";import"./createReactComponent-Bb1_FpID.js";const c=["number","string","boolean","date","array","object"];function M({resource:y,closeModal:h,restApis:j}){const{data:o,setData:l,post:U,processing:m,errors:u,reset:$}=C(y),[d,b]=i.useState([]);i.useState(Array(o.fields.length).fill(!1)),i.useState([]),i.useEffect(()=>{F.get(route("resources.fields")).then(s=>{b(s.data.data)}).catch(s=>{E.error("There was an error!")})},[]);const k=s=>{s.preventDefault()},g=s=>{if(typeof s=="string"){const r=s.split(" ");return r.splice(1,1),r.join(" ")}else return""},v=()=>{o.fields.length>=10},N=s=>{const r=o.fields;r.splice(s,1),l("fields",r)},w=s=>s.charAt(0).toUpperCase()+s.slice(1);return e.jsxs("form",{onSubmit:k,className:"p-6 overflow-y-scroll",style:{maxHeight:"100vh",overflowY:"auto"},children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Update Resource"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(I,{htmlFor:"name-resource",value:"Resource Name"}),e.jsx(f,{id:"name-resource",type:"text",name:"name",required:!0,value:o.name,onChange:s=>l("name",s.target.value),className:"mt-1 block lg:w-2/4 md:w-2/4 sm:w-full",autoComplete:"off",placeholder:"Example: users, posts, comments"}),e.jsx(p,{message:u.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mt-6",children:"Scheme"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Define Resource schema, it will be used to generate mock data."}),o.fields.map((s,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex align-items-center mt-2",children:[e.jsx(f,{id:`field-name-${r}`,type:"text",required:!0,name:`fields[${r}][name]`,disabled:r==0,value:s.name,onChange:t=>{let a=[...o.fields];a[r].name=t.target.value,l("fields",a)},autoComplete:"off",placeholder:"Field name",className:"w-3/12"}),e.jsxs("select",{id:`category-type-${r}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:c.includes(s.category)?s.category:"fakerPHP",disabled:r==0,onChange:t=>{let a=[...o.fields];a[r].name=t.target.value,l("fields",a)},children:[r==0&&e.jsx("option",{value:"number",children:"Unique ID"}),Object.entries(d).map(([t,a])=>e.jsx("option",{value:t,children:w(t)},t))]}),d[c.includes(s.category)?s.category:"fakerPHP"]&&e.jsx("select",{id:`field-type-${r}`,className:" ml-6 w-3/12 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:s.type,onChange:t=>{let a=[...o.fields];a[r].name=t.target.value,l("fields",[])},children:Object.entries(d[c.includes(s.category)?s.category:"fakerPHP"]||{}).map(([t,a])=>e.jsx("option",{value:a,children:a},t))}),r!=0&&e.jsx(n,{type:"button",onClick:()=>N(r),className:"ml-6",children:e.jsx(x,{})}),r==0&&e.jsx(n,{style:{opacity:"0"},type:"button",onClick:()=>{},className:"ml-6",children:e.jsx(x,{})})]},r),e.jsx(p,{message:g(g(u[`fields.${r}.type`])),className:"mt-2"})]},r)),e.jsx(n,{className:"mt-6",type:"button",onClick:v,disabled:m||10<=o.fields.length,children:e.jsx(S,{size:25})})]}),e.jsx("h2",{className:"text-lg mt-6 font-medium text-gray-900 dark:text-gray-100",children:"Endpoints"}),e.jsx("div",{className:"mt-4",children:j.map((s,r)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"mt-2 text-sm text-gray-600 font-bold dark:text-gray-400",children:s.method}),e.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-md font-semibold text-md text-gray-700 dark:text-gray-300 tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-25 transition ease-in-out duration-150",children:s.route})]},r))}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(n,{onClick:h,children:"Cancel"}),e.jsx(P,{className:"ms-3",disabled:m,children:"Update"})]})]})}export{M as UpdateResource};
